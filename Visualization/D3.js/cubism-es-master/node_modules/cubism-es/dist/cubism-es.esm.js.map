{"version":3,"file":"cubism-es.esm.js","sources":["../src/context/apiStart.js","../src/context/apiStop.js","../src/context/apiOn.js","../src/context/apiFocus.js","../src/context/update.js","../src/context/apiClientDelay.js","../src/context/apiServerDelay.js","../src/context/apiSize.js","../src/context/apiStep.js","../src/metric/apiAlias.js","../src/metric/apiExtent.js","../src/metric/apiOn.js","../src/metric/apiPrepare.js","../src/metric/apiShift.js","../src/metric/apiValueAt.js","../src/metric/apiOperator.js","../src/metric/index.js","../src/context/apiCube.js","../src/context/apiAxis.js","../src/context/apiRule.js","../src/horizon/apiRender.js","../src/horizon/apiMisc.js","../src/horizon/apiRemvoe.js","../src/horizon/index.js","../src/context/apiGangliaWeb.js","../src/librato/downUpSampling.js","../src/librato/findIdealLibratoRFesolution.js","../src/librato/findLibratoResolution.js","../src/librato/makeUrl.js","../src/librato/request.js","../src/librato/index.js","../src/context/apiGraphite.js","../src/comparison/apiRemove.js","../src/comparison/apiMisc.js","../src/uuid.js","../src/comparison/apiRender.js","../src/comparison/index.js","../src/context/index.js","../src/option.js"],"sourcesContent":["const apiStart = state => ({\n  start: () => {\n    const {\n      _timeout,\n      _stop1,\n      _serverDelay,\n      _clientDelay,\n      _step,\n      _event,\n      _scale,\n      _size,\n      _focus,\n    } = state;\n\n    if (_timeout) clearTimeout(_timeout);\n    let delay = +_stop1 + _serverDelay - Date.now();\n\n    // If we're too late for the first prepare _event, skip it.\n    if (delay < _clientDelay) delay += _step;\n\n    const prepare = () => {\n      state._stop1 = new Date(\n        Math.floor((Date.now() - _serverDelay) / _step) * _step\n      );\n      state._start1 = new Date(state._stop1 - _size * _step);\n      _event.call('prepare', state, state._start1, state._stop1);\n\n      setTimeout(() => {\n        state.start0 = state._start1;\n        state.stop0 = state._stop1;\n        _scale.domain([state.start0, state.stop0]);\n        _event.call('beforechange', state, state._start1, state._stop1);\n        _event.call('change', state, state._start1, state._stop1);\n        _event.call('focus', state, _focus);\n      }, _clientDelay);\n\n      state.timeout = setTimeout(prepare, _step);\n    };\n\n    state.timeout = setTimeout(prepare, delay);\n\n    return state;\n  },\n});\n\nexport default apiStart;\n","const apiStop = state => ({\n  stop: () => {\n    state._timeout = clearTimeout(state._timeout);\n    return state;\n  },\n});\n\nexport default apiStop;\n","const apiOn = state => ({\n  on: (type, listener = null) => {\n    const { _event, _focus, _start1, _stop1, _start0, _stop0 } = state;\n    if (listener === null) return _event.on(type);\n\n    _event.on(type, listener);\n\n    // Notify the listener of the current start and stop time, as appropriate.\n    // This way, metrics can make requests for data immediately,\n    // and likewise the axis can display itself synchronously.\n    if (/^prepare(\\.|$)/.test(type)) listener(_start1, _stop1);\n    if (/^beforechange(\\.|$)/.test(type)) listener(_start0, _stop0);\n    if (/^change(\\.|$)/.test(type)) listener(_start0, _stop0);\n    if (/^focus(\\.|$)/.test(type)) listener(_focus);\n\n    return state;\n  },\n});\n\nexport default apiOn;\n","const apiFocus = state => ({\n  focus: i => {\n    const { _event } = state;\n    _event.call('focus', state, (state._focus = i));\n    return state;\n  },\n});\n\nexport default apiFocus;\n","const update = state => {\n  const { _step, _serverDelay, _clientDelay, _scale, _size } = state;\n  const now = Date.now();\n  state._stop0 = new Date(\n    Math.floor((now - _serverDelay - _clientDelay) / _step) * _step\n  );\n  state._start0 = new Date(state._stop0 - _size * _step);\n  state._stop1 = new Date(Math.floor((now - _serverDelay) / _step) * _step);\n  state._start1 = new Date(state._stop1 - _size * _step);\n  _scale.domain([state._start0, state._stop0]);\n  return state;\n};\n\nexport default update;\n","import update from './update';\n\n// The client delay is the amount of additional time we wait to fetch those\n// metrics from the server. The client and server delay combined represent the\n// age of the most recent displayed metric. Defaults to 1 second.\nconst apiClientDelay = state => ({\n  clientDelay: (_clientDelay = null) => {\n    if (_clientDelay === null) return state._clientDelay;\n    state._clientDelay = +_clientDelay;\n    return update(state);\n  },\n});\n\nexport default apiClientDelay;\n","import update from './update';\n\n// The server delay is the amount of time we wait for the server to compute a\n// metric. This delay may result from clock skew or from delays collecting\n// metrics from various hosts. Defaults to 4 seconds.\nconst apiServerDelay = state => ({\n  serverDelay: (_serverDelay = null) => {\n    if (_serverDelay === null) return state._serverDelay;\n    state._serverDelay = +_serverDelay;\n    return update(state);\n  },\n});\n\nexport default apiServerDelay;\n","import update from './update';\n\n// Set or get the context size (the count of metric values).\n// Defaults to 1440 (four hours at ten seconds).\nconst apiSize = state => ({\n  size: (_size = null) => {\n    if (_size === null) return state._size;\n    state._scale.range([0, (state._size = +_size)]);\n    return update(state);\n  },\n});\n\nexport default apiSize;\n","import update from './update';\n\n// Set or ge2t the step interval in milliseconds.\n// Defaults to ten seconds.\nconst apiStep = state => ({\n  step: (_step = null) => {\n    if (_step === null) return state._step;\n    state._step = +_step;\n    return update(state);\n  },\n});\n\nexport default apiStep;\n","const apiAlias = state => ({\n  alias: name => {\n    state.toString = () => name;\n    return state;\n  },\n});\n\nexport default apiAlias;\n","const apiExtent = state => ({\n  extent: () => {\n    const { _size, _values } = state;\n    let i = 0,\n      value,\n      min = Infinity,\n      max = -Infinity;\n    while (++i < _size) {\n      value = _values[i];\n      if (value < min) min = value;\n      if (value > max) max = value;\n    }\n    return [min, max];\n  },\n});\n\nexport default apiExtent;\n","// When the context changes, switch to the new data, ready-or-not!\nconst beforechange = state => (start1, stop1) => {\n  const { _step, _size } = state;\n  if (!isFinite(state._start)) state._start = start1;\n  state._values.splice(\n    0,\n    Math.max(0, Math.min(_size, Math.round((start1 - state._start) / _step)))\n  );\n  state._start = start1;\n  state._stop = stop1;\n};\n\n// Prefetch new data into a temporary array.\nconst prepare = (state, request) => (start1, stop) => {\n  const { _start, _step, _fetching, _event, _size } = state;\n  const steps = Math.min(_size, Math.round((start1 - _start) / _step));\n  if (!steps || _fetching) return; // already fetched, or fetching!\n  state._fetching = true;\n  state._steps = Math.min(_size, steps + 6);\n  const start0 = new Date(stop - state._steps * _step);\n  request(start0, stop, _step, function(error, data) {\n    state._fetching = false;\n    if (error) return console.warn(error);\n    const i = isFinite(_start) ? Math.round((start0 - _start) / _step) : 0;\n    for (let j = 0, m = data.length; j < m; ++j) state._values[j + i] = data[j];\n    _event.call('change', _start, stop);\n  });\n};\n\nconst apiOn = (state, request) => ({\n  on: (type, listener = null) => {\n    const { _event, _id, context, _start, _stop } = state;\n\n    if (listener === null) return _event.on(type);\n\n    // If there are no listeners, then stop listening to the context,\n    // and avoid unnecessary fetches.\n    if (listener == null) {\n      if (_event.on(type) != null && --state._listening === 0) {\n        context.on('prepare' + _id, null).on('beforechange' + _id, null);\n      }\n    } else {\n      if (_event.on(type) == null && ++state._listening === 1) {\n        context\n          .on('prepare' + _id, prepare(state, request))\n          .on('beforechange' + _id, beforechange(state));\n      }\n    }\n\n    _event.on(type, listener);\n\n    // Notify the listener of the current start and stop time, as appropriate.\n    // This way, charts can display synchronous metrics immediately.\n    if (listener != null) {\n      if (/^change(\\.|$)/.test(type)) listener(_start, _stop);\n    }\n\n    return state;\n  },\n});\n\nexport default apiOn;\n","// Number of metric to refetch each period, in case of lag.\nconst MetricOverlap = 6;\n\n// Prefetch new data into a temporary array.\nconst apiPrepare = (state, request) => ({\n  prepare: (start1, stop) => {\n    const { _size, _start, _step, _fetching, _event } = state;\n\n    const steps = Math.min(_size, Math.round((start1 - _start) / _step));\n    if (!steps || _fetching === true) return; // already fetched, or fetching!\n    state._fetching = true;\n    state._steps = Math.min(_size, steps + MetricOverlap);\n    const start0 = new Date(stop - steps * _step);\n\n    request(start0, stop, _step, function(error, data) {\n      state._fetching = false;\n      if (error) return console.warn(error);\n      const i = isFinite(_start) ? Math.round((start0 - _start) / _step) : 0;\n      for (let j = 0, m = data.length; j < m; ++j) values[j + i] = data[j];\n      _event.call('change', state, _start, stop);\n    });\n  },\n});\n\nexport default apiPrepare;\n","// Wraps the specified request implementation, and shifts time by the given offset.\nconst metricShift = (request, offset) => (start, stop, step, callback) =>\n  request(new Date(+start + offset), new Date(+stop + offset), step, callback);\n\nconst apiShift = (state, request) => ({\n  shift: offset => {\n    const { context } = state;\n\n    return context.metric(metricShift(request, +offset));\n  },\n});\n\nexport default apiShift;\n","const apiValueAt = state => ({\n  valueAt: i => state._values[i],\n});\n\nexport default apiValueAt;\n","const genericOperate = (name, operate) => (state, metric) => {\n  return Object.assign(\n    {},\n    state,\n    {\n      valueAt: i => operate(state.valueAt(i), metric.valueAt(i)),\n      toString: () => `${state} ${name} ${metric}`,\n      on: (type, listener = null) => {\n        if (listener === null) return state.on(type);\n        state.on(type, listener);\n        metric.on(type, listener);\n      },\n    },\n    {\n      shift: offset =>\n        genericOperate(name, operate)(\n          state.shift(offset),\n          metric.shift(offset)\n        ),\n    }\n  );\n};\n\nconst apiOperator = state => ({\n  add: metric => genericOperate('+', (a, b) => a + b)(state, metric),\n  subtract: metric => genericOperate('-', (a, b) => a - b)(state, metric),\n  multiply: metric => genericOperate('*', (a, b) => a * b)(state, metric),\n  divide: metric => genericOperate('/', (a, b) => a / b)(state, metric),\n});\n\nexport default apiOperator;\n","import { dispatch } from 'd3-dispatch';\n\nimport apiAlias from './apiAlias';\nimport apiExtent from './apiExtent';\nimport apiOn from './apiOn';\nimport apiPrepare from './apiPrepare';\nimport apiShift from './apiShift';\nimport apiValueAt from './apiValueAt';\nimport apiOperator from './apiOperator';\n\nconst apiToString = name => ({\n  toString: () => name,\n});\n\nconst apiMetric = context => ({\n  metric: (request, name) => {\n    const metricState = {\n      context,\n      _id: '.metric-' + ++context._id,\n      _start: -Infinity,\n      _stop: null,\n      _step: context.step(),\n      _size: context.size(),\n      _values: [],\n      _event: dispatch('change'),\n      _listening: 0,\n      _fetching: false,\n    };\n\n    const metric = Object.assign(\n      metricState,\n      apiOn(metricState, request),\n      apiPrepare(metricState, request),\n      apiValueAt(metricState),\n      apiAlias(metricState),\n      apiShift(metricState, request),\n      apiExtent(metricState),\n      apiToString(name)\n    );\n\n    return Object.assign(metric, apiOperator(metric));\n  },\n});\n\nexport default apiMetric;\n","import { isoFormat } from 'd3-time-format';\nimport { json } from 'd3-fetch';\n\nconst apiCube = context => ({\n  cube: (host = '') => ({\n    toString: () => host,\n    metric: expression => {\n      return context.metric((start, stop, step, callback) => {\n        json(\n          host +\n            '/1.0/metric' +\n            '?expression=' +\n            encodeURIComponent(expression) +\n            '&start=' +\n            isoFormat(start) +\n            '&stop=' +\n            isoFormat(stop) +\n            '&step=' +\n            step\n        ).then(data => {\n          if (!data) return callback(new Error('unable to load data'));\n          callback(null, data.map(d => d.value));\n        });\n      }, (expression += ''));\n    },\n  }),\n});\n\nexport default apiCube;\n","import { timeFormat } from 'd3-time-format';\nimport { axisBottom, axisLeft, axisRight, axisTop } from 'd3-axis';\nimport { select } from 'd3-selection';\n\nconst formatSeconds = timeFormat('%I:%M:%S %p');\nconst formatMinutes = timeFormat('%I:%M %p');\nconst formatDays = timeFormat('%B %d');\nconst formatDefault = context =>\n  context.step() < 6e4\n    ? formatSeconds\n    : context.step() < 864e5\n      ? formatMinutes\n      : formatDays;\n\nconst apiRemove = axisState => ({\n  remove: selection => {\n    const { context } = axisState;\n    selection\n      .selectAll('svg')\n      .each(d => {\n        context.on('change.axis-' + d.id, null);\n        context.on('focus.axis-' + d.id, null);\n      })\n      .remove();\n  },\n});\n\nconst apiFocusFormat = axisState => ({\n  focusFormat: (_ = null) => {\n    if (_ === null)\n      return axisState.format === formatDefault(axisState.context) ? null : _;\n    axisState.format = _ == null ? formatDefault(context) : _;\n    return axisState;\n  },\n});\n\nconst apiRender = (context, state) => ({\n  render: selection => {\n    const { _axis, scale, format, id, size } = state;\n    let tick = null;\n\n    const g = selection\n      .append('svg')\n      .datum({ id })\n      .attr('width', size)\n      .attr('height', Math.max(28, -_axis.tickSize()))\n      .append('g')\n      .attr('transform', 'translate(0,' + 4 + ')')\n      .call(_axis);\n\n    context.on('change.axis-' + id, () => {\n      g.call(_axis);\n      if (!tick)\n        tick = select(\n          g.node().appendChild(\n            g\n              .selectAll('text')\n              .node()\n              .cloneNode(true)\n          )\n        )\n          .style('display', 'none')\n          .text(null);\n    });\n\n    context.on('focus.axis-' + id, i => {\n      if (tick) {\n        if (i == null) {\n          tick.style('display', 'none');\n          g.selectAll('text').style('fill-opacity', null);\n        } else {\n          tick\n            .style('display', null)\n            .attr('x', i)\n            .text(format(scale.invert(i)));\n          const dx = tick.node().getComputedTextLength() + 6;\n          g\n            .selectAll('text')\n            .style('fill-opacity', d => (Math.abs(scale(d) - i) < dx ? 0 : 1));\n        }\n      }\n    });\n  },\n});\n\nconst apiTicks = axisState => ({\n  ticks: (...args) => {\n    axisState._axis.ticks(args);\n    return axisState;\n  },\n});\n\nconst apiOrient = axisSate => ({\n  orient: orient => {\n    const { context } = axisSate;\n    switch (orient) {\n      case 'top':\n        axisSate._axis = axisTop().scale(context._scale);\n        break;\n      case 'bottom':\n        axisSate._axis = axisBottom().scale(context._scale);\n        break;\n      case 'left':\n        axisSate._axis = axisLeft().scale(context._scale);\n        break;\n      case 'right':\n        axisSate._axis = axisRight().scale(context._scale);\n        break;\n      case 'default':\n        console.warn('orient shall be one of bottom|top|left|right');\n        break;\n      default:\n        console.warn('orient shall be one of bottom|top|left|right');\n        break;\n    }\n\n    return axisSate;\n  },\n});\n\nconst apiAxis = context => ({\n  axis: () => {\n    const axisState = {\n      context,\n      size: context._size,\n      scale: context._scale,\n      _axis: axisBottom().scale(context._scale),\n      format: formatDefault(context),\n      id: ++context._id,\n    };\n\n    return Object.assign(\n      axisState,\n      apiRemove(axisState),\n      apiFocusFormat(axisState),\n      apiTicks(axisState),\n      apiOrient(axisState),\n      apiRender(context, axisState)\n    );\n  },\n});\n\nexport default apiAxis;\n","const apiRemove = (ruleState, selection) => ({\n  remove: () => {\n    const { _context } = ruleState;\n\n    selection\n      .selectAll('.line')\n      .each(d => _context.on('focus.rule-' + d.id, null))\n      .remove();\n  },\n});\n\nconst apiMetric = ruleState => ({\n  metric: (metric = null) => {\n    if (metric === null) return ruleState._metric;\n    ruleState._metric = metric;\n    return ruleState;\n  },\n});\n\nconst apiRender = state => ({\n  render: selection => {\n    const { _context, _metric } = state;\n    const id = ++_context._id;\n\n    const line = selection\n      .append('div')\n      .datum({ id: id })\n      .attr('class', 'line')\n      .style('position', 'absolute')\n      .style('top', 0)\n      .style('bottom', 0)\n      .style('width', '1px')\n      .style('pointer-events', 'none');\n\n    selection.each((d, i) => {\n      const metric_ = typeof _metric === 'function' ? _metric(d, i) : _metric;\n      if (!metric_) return;\n\n      const change = (start, stop) => {\n        const values = [];\n\n        for (let i = 0, n = _context.size(); i < n; ++i) {\n          if (metric_.valueAt(i)) {\n            values.push(i);\n          }\n        }\n\n        const lines = selection.selectAll('.metric').data(values);\n        lines.exit().remove();\n        lines\n          .enter()\n          .append('div')\n          .attr('class', 'metric line')\n          .style('position', 'absolute')\n          .style('top', 0)\n          .style('bottom', 0)\n          .style('width', '1px')\n          .style('pointer-events', 'none');\n\n        lines.style('left', i => i + 'px');\n      };\n\n      _context.on('change.rule-' + id, change);\n      metric_.on('change.rule-' + id, change);\n    });\n\n    _context.on('focus.rule-' + id, i => {\n      line\n        // .datum(i)\n        .style('display', i == null ? 'none' : null)\n        .style('left', i == null ? null : `${i}px`);\n    });\n  },\n});\n\nconst apiRule = context => ({\n  rule: () => {\n    const state = {\n      _context: context,\n      _metric: d => d,\n    };\n\n    return Object.assign(\n      state,\n      apiRemove(state),\n      apiMetric(state),\n      apiRender(state)\n    );\n  },\n});\n\nexport default apiRule;\n","import { select } from 'd3-selection';\nimport * as d3 from 'd3';\n\nconst apiRender = (context, state) => ({\n  render: selection => {\n    selection.append('div').attr('a', 'b');\n    const {\n      _width,\n      _height,\n      _title,\n      _metric,\n      _colors,\n      _extent,\n      _scale,\n      _buffer,\n      _mode,\n      _format,\n    } = state;\n\n    selection\n      .on('mousemove.horizon', function() {\n        // todo: why directly importing mouse doesn't work here?\n        context.focus(Math.round(d3.mouse(this)[0]));\n      })\n      .on('mouseout.horizon', () => context.focus(null));\n\n    selection\n      .append('canvas')\n      .attr('width', _width)\n      .attr('height', _height);\n\n    selection\n      .append('span')\n      .attr('class', 'title')\n      .text(_title);\n\n    selection.append('span').attr('class', 'value');\n\n    selection.each(function(d, i) {\n      const id = ++context._id,\n        metric_ = typeof _metric === 'function' ? _metric(d, i) : _metric,\n        colors_ = typeof _colors === 'function' ? _colors(d, i) : _colors,\n        extent_ = typeof _extent === 'function' ? _extent(d, i) : _extent,\n        step = context.step(),\n        canvas = select(this).select('canvas'),\n        span = select(this).select('.value'),\n        m = colors_.length >> 1;\n\n      let start = -Infinity,\n        max_,\n        y1,\n        ready;\n\n      canvas.datum({ id: id, metric: metric_ });\n      const ctx = canvas.node().getContext('2d');\n\n      function change(start1, stop) {\n        ctx.save();\n\n        // compute the new extent and ready flag\n        let extent = metric_.extent();\n        ready = extent.every(isFinite);\n        if (extent_ != null) extent = extent_;\n\n        // if this is an update (with no extent change), copy old values!\n        let i0 = 0,\n          max = Math.max(-extent[0], extent[1]);\n        if (this === context) {\n          if (max === max_) {\n            i0 = _width - 6;\n            const dx = (start1 - start) / step;\n            if (dx < _width) {\n              const canvas0 = _buffer.getContext('2d');\n              canvas0.clearRect(0, 0, _width, _height);\n              canvas0.drawImage(\n                ctx.canvas,\n                dx,\n                0,\n                _width - dx,\n                _height,\n                0,\n                0,\n                _width - dx,\n                _height\n              );\n              ctx.clearRect(0, 0, _width, _height);\n              ctx.drawImage(canvas0.canvas, 0, 0);\n            }\n          }\n          start = start1;\n        }\n\n        // update the domain\n        _scale.domain([0, (max_ = max)]);\n\n        // clear for the new data\n        ctx.clearRect(i0, 0, _width - i0, _height);\n\n        // record whether there are negative values to display\n        let negative;\n\n        // positive bands\n        for (let j = 0; j < m; ++j) {\n          ctx.fillStyle = colors_[m + j];\n\n          // Adjust the range based on the current band index.\n          let y0 = (j - m + 1) * _height;\n          _scale.range([m * _height + y0, y0]);\n          y0 = _scale(0);\n\n          for (let i = i0, n = _width, y1; i < n; ++i) {\n            y1 = metric_.valueAt(i);\n            if (y1 <= 0) {\n              negative = true;\n              continue;\n            }\n            if (y1 === undefined) continue;\n            ctx.fillRect(i, (y1 = _scale(y1)), 1, y0 - y1);\n          }\n        }\n\n        if (negative) {\n          // enable offset mode\n          if (_mode === 'offset') {\n            ctx.translate(0, _height);\n            ctx.scale(1, -1);\n          }\n\n          // negative bands\n          for (let j = 0; j < m; ++j) {\n            ctx.fillStyle = colors_[m - 1 - j];\n\n            // Adjust the range based on the current band index.\n            let y0 = (j - m + 1) * _height;\n            _scale.range([m * _height + y0, y0]);\n            y0 = _scale(0);\n\n            for (let i = i0, n = _width, y1; i < n; ++i) {\n              y1 = metric_.valueAt(i);\n              if (y1 >= 0) continue;\n              ctx.fillRect(i, _scale(-y1), 1, y0 - _scale(-y1));\n            }\n          }\n        }\n\n        ctx.restore();\n      }\n\n      const focus = i => {\n        if (i == null) i = _width - 1;\n        const value = metric_.valueAt(i);\n        span.datum(value).text(isNaN(value) ? null : _format);\n      };\n\n      // Update the chart when the context changes.\n      context.on('change.horizon-' + id, change);\n      context.on('focus.horizon-' + id, focus);\n\n      // Display the first metric change immediately,\n      // but defer subsequent updates to the canvas change.\n      // Note that someone still needs to listen to the metric,\n      // so that it continues to update automatically.\n      metric_.on('change.horizon-' + id, function(start, stop) {\n        change(start, stop), focus();\n        if (ready) metric_.on('change.horizon-' + id, d => d);\n      });\n    });\n  },\n});\n\nexport default apiRender;\n","const apiMisc = state => ({\n  mode: (_ = null) => {\n    if (_ === null) return state._mode;\n    state._mode = _ + '';\n    return state;\n  },\n\n  height: (_ = null) => {\n    if (_ === null) return state._height;\n    state._height = +_;\n    state._buffer.height = +_;\n    return state;\n  },\n\n  metric: (_ = null) => {\n    if (_ === null) return state._metric;\n    state._metric = _;\n    return state;\n  },\n\n  scale: (_ = null) => {\n    if (_ === null) return state._scale;\n    state._scale = _;\n    return state;\n  },\n\n  extent: (_ = null) => {\n    if (_ === null) return state._extent;\n    state._extent = _;\n    return state;\n  },\n\n  title: (_ = null) => {\n    if (_ === null) return state._title;\n    state._title = _;\n    return state;\n  },\n\n  format: (_ = null) => {\n    if (_ === null) return state._format;\n    state._format = _;\n    return state;\n  },\n  colors: (_ = null) => {\n    if (_ === null) return state._colors;\n    state._colors = _;\n    return state;\n  },\n});\n\nexport default apiMisc;\n","const apiRemove = context => ({\n  remove: selection => {\n    selection.on('mousemove.horizon', null).on('mouseout.horizon', null);\n\n    const remove = d => {\n      d.metric.on('change.horizon-' + d.id, null);\n      context.on('change.horizon-' + d.id, null);\n      context.on('focus.horizon-' + d.id, null);\n    };\n\n    selection\n      .selectAll('canvas')\n      .each(remove)\n      .remove();\n\n    selection.selectAll('._title,.value').remove();\n  },\n});\n\nexport default apiRemove;\n","import { scaleLinear } from 'd3-scale';\nimport { format } from 'd3-format';\nimport { interpolateRound } from 'd3-interpolate';\n\nimport apiRender from './apiRender';\nimport apiMisc from './apiMisc';\nimport apiRemove from './apiRemvoe';\n\nconst apiHorizon = context => ({\n  horizon: function() {\n    const buffer = document.createElement('canvas');\n    buffer.width = context.size();\n    buffer.height = 30;\n\n    const state = {\n      _mode: 'offset',\n      _buffer: buffer,\n      _width: buffer.width,\n      _height: buffer.height,\n      _scale: scaleLinear().interpolate(interpolateRound),\n      _metric: d => d,\n      _extent: null,\n      _title: d => d,\n      _format: format('.2s'),\n      _colors: [\n        '#08519c',\n        '#3182bd',\n        '#6baed6',\n        '#bdd7e7',\n        '#bae4b3',\n        '#74c476',\n        '#31a354',\n        '#006d2c',\n      ],\n    };\n\n    return Object.assign(\n      state,\n      apiRemove(state),\n      apiMisc(state),\n      apiRender(context, state)\n    );\n  },\n});\n\nexport default apiHorizon;\n","import { json } from 'd3-fetch';\n\nconst apiGangliaWeb = context => ({\n  gangliaWeb: config => {\n    const host = config.host || '';\n    let uriPathPrefix = config.uriPathPrefix || '/ganglia2/';\n\n    /* Add leading and trailing slashes, as appropriate. */\n    if (uriPathPrefix[0] !== '/') {\n      uriPathPrefix = '/' + uriPathPrefix;\n    }\n\n    if (uriPathPrefix[uriPathPrefix.length - 1] !== '/') {\n      uriPathPrefix += '/';\n    }\n\n    return {\n      toString: () => host + uriPathPrefix,\n      metric: metricInfo => {\n        /* Store the members from metricInfo into local variables. */\n        const {\n          clusterName,\n          metricName,\n          hostName,\n          onChangeCallback,\n        } = metricInfo;\n        const isReport =\n          metricInfo.isReport === undefined ? false : metricInfo.isReport;\n        /* Reasonable (not necessarily pretty) default for titleGenerator. */\n        const defaultTitleGenerator = unusedMetricInfo =>\n          `clusterName:${clusterName} metricName:${metricName} hostName:${hostName}`;\n        const titleGenerator =\n          metricInfo.titleGenerator || defaultTitleGenerator;\n\n        /* Default to plain, simple metrics. */\n        const metricKeyName = isReport ? 'g' : 'm';\n\n        const metricFn = (start, stop, step, callback) => {\n          const constructGangliaWebRequestQueryParams = () =>\n            `c=${clusterName}&${metricKeyName}=${metricName}&h=${hostName}` +\n            '&cs=' +\n            start / 1000 +\n            '&ce=' +\n            stop / 1000 +\n            '&step=' +\n            step / 1000 +\n            '&graphlot=1';\n\n          json(\n            host +\n              uriPathPrefix +\n              'graph.php?' +\n              constructGangliaWebRequestQueryParams()\n          )\n            .then(result => {\n              if (result === undefined || result === null) {\n                return callback(new Error('Unable to fetch GangliaWeb data'));\n              }\n\n              callback(null, result[0].data);\n            })\n            .catch(e =>\n              callback(new Error(`Unable to fetch GangliaWeb data: Error ${e}`))\n            );\n        };\n        titleGenerator(metricInfo);\n\n        const gangliaWebMetric = context.metric(metricFn);\n\n        gangliaWebMetric.toString = () => titleGenerator(metricInfo);\n\n        /* Allow users to run their custom code each time a gangliaWebMetric changes.\n         *\n         * TODO Consider abstracting away the naked Cubism call, and instead exposing\n         * a callback that takes in the values array (maybe alongwith the original\n         * start and stop 'naked' parameters), since it's handy to have the entire\n         * dataset at your disposal (and users will likely implement onChangeCallback\n         * primarily to get at this dataset).\n         */\n        if (onChangeCallback) {\n          gangliaWebMetric.on('change', onChangeCallback);\n        }\n\n        return gangliaWebMetric;\n      },\n    };\n  },\n});\n\nexport default apiGangliaWeb;\n","/*\n * We are most likely not going to get the same number of measurements\n * cubism expects for a particular context: We have to perform down/up\n * sampling\n */\nconst downUpSampling = (isdate, iedate, step, librato_mm) => {\n  const av = [];\n\n  for (let i = isdate; i <= iedate; i += step) {\n    const int_mes = [];\n    while (librato_mm.length && librato_mm[0].measure_time <= i) {\n      int_mes.push(librato_mm.shift().value);\n    }\n\n    let v;\n    if (int_mes.length) {\n      /* Compute the average */\n      v =\n        int_mes.reduce(function(a, b) {\n          return a + b;\n        }) / int_mes.length;\n    } else {\n      /* No librato values on interval */\n      v = av.length ? av[av.length - 1] : 0;\n    }\n    av.push(v);\n  }\n\n  return av;\n};\n\nexport default downUpSampling;\n","/* Given a step, find the best librato resolution to use.\n         *\n         * Example:\n         *\n         * (s) : cubism step\n         *\n         * avail_rsts   1 --------------- 60 --------------- 900 ---------------- 3600\n         *                                |    (s)            |\n         *                                |                   |\n         *                              [low_res             top_res]\n         *\n         * return: low_res (60)\n         */\nconst findIdealLibratoRFesolution = step => {\n  const avail_rsts = [1, 60, 900, 3600];\n  const highest_res = avail_rsts[0],\n    lowest_res = avail_rsts[avail_rsts.length]; // high and lowest available resolution from librato\n\n  /* If step is outside the highest or lowest librato resolution, pick them and we are done */\n  if (step >= lowest_res) return lowest_res;\n\n  if (step <= highest_res) return highest_res;\n\n  /* If not, find in what resolution interval the step lands. */\n  let iof, top_res, i;\n  for (i = step; i <= lowest_res; i++) {\n    iof = avail_rsts.indexOf(i);\n    if (iof > -1) {\n      top_res = avail_rsts[iof];\n      break;\n    }\n  }\n\n  let low_res;\n  for (i = step; i >= highest_res; i--) {\n    iof = avail_rsts.indexOf(i);\n    if (iof > -1) {\n      low_res = avail_rsts[iof];\n      break;\n    }\n  }\n\n  /* What's the closest librato resolution given the step ? */\n  return top_res - step < step - low_res ? top_res : low_res;\n};\n\nexport default findIdealLibratoRFesolution;\n","import findIdealLibratoRFesolution from './findIdealLibratoRFesolution';\n\nconst findLibratoResolution = (sdate, edate, step) => {\n  const i_size = edate - sdate, // interval size\n    month = 2419200,\n    week = 604800,\n    two_days = 172800;\n\n  if (i_size > month) return 3600;\n\n  const ideal_res = findIdealLibratoRFesolution(step);\n\n  /*\n     * Now we have the ideal resolution, but due to the retention policies at librato, maybe we have\n     * to use a higher resolution.\n     * http://support.metrics.librato.com/knowledgebase/articles/66838-understanding-metrics-roll-ups-retention-and-grap\n     */\n  if (i_size > week && ideal_res < 900) return 900;\n  else if (i_size > two_days && ideal_res < 60) return 60;\n  else return ideal_res;\n};\n\nexport default findLibratoResolution;\n","import findLibratoResolution from './findLibratoResolution';\n\nconst make_url = (sdate, edate, step, composite) => {\n  const url_prefix = 'https://metrics-api.librato.com/v1/metrics';\n  const params =\n    'compose=' +\n    composite +\n    '&start_time=' +\n    sdate +\n    '&end_time=' +\n    edate +\n    '&resolution=' +\n    findLibratoResolution(sdate, edate, step);\n  return url_prefix + '?' + params;\n};\n\nexport default make_url;\n","import { json } from 'd3-fetch';\n\nimport downUpSampling from './downUpSampling';\nimport makeUrl from './makeUrl';\n\n/* All the logic to query the librato API is here */\nconst request = (composite, user, token) => ({\n  fire: (isdate, iedate, step, callback_done) => {\n    const a_values = []; /* Store partial values from librato */\n    const full_url = makeUrl(isdate, iedate, step, composite);\n    const auth_string = 'Basic ' + btoa(user + ':' + token);\n\n    /*\n         * Librato has a limit in the number of measurements we get back in a request (100).\n         * We recursively perform requests to the API to ensure we have all the data points\n         * for the interval we are working on.\n         */\n    json(full_url)\n      .header('X-Requested-With', 'XMLHttpRequest')\n      .header('Authorization', auth_string)\n      .header('Librato-User-Agent', 'cubism/' + cubism.version)\n      .then(data => {\n        if (data.measurements.length === 0) {\n          return;\n        }\n        data.measurements[0].series.forEach(function(o) {\n          a_values.push(o);\n        });\n\n        const still_more_values = 'query' in data && 'next_time' in data.query;\n        if (still_more_values) {\n          request(makeUrl(data.query.next_time, iedate, step));\n        } else {\n          const a_adjusted = downUpSampling(isdate, iedate, step, a_values);\n          callback_done(a_adjusted);\n        }\n      })\n      .catch(error => console.error(error));\n  },\n});\n\nexport default request;\n","/* librato (http://dev.librato.com/v1/post/metrics) source\n * If you want to see an example of how to use this source, check: https://gist.github.com/drio/5792680\n */\nimport request from './request';\n\nconst DateFormatter = time => Math.floor(time / 1000);\n\nconst apiLibrato = context => ({\n  librato: (user, token) => ({\n    toString: () => 'librato',\n    metric: m_composite =>\n      context.metric((start, stop, step, callback) => {\n        /* All the librato logic is here; .fire() retrieves the metrics' data */\n        request(m_composite, user, token).fire(\n          DateFormatter(start),\n          DateFormatter(stop),\n          DateFormatter(step),\n          a_values => callback(null, a_values)\n        );\n      }, (m_composite += '')),\n  }),\n});\n\nexport default apiLibrato;\n","import { json, text } from 'd3-fetch';\n\n// Helper method for parsing graphite's raw format.\nconst parseGraphite = text => {\n  const i = text.indexOf('|'),\n    meta = text.substring(0, i),\n    c = meta.lastIndexOf(','),\n    b = meta.lastIndexOf(',', c - 1),\n    a = meta.lastIndexOf(',', b - 1),\n    start = meta.substring(a + 1, b) * 1000,\n    step = meta.substring(c + 1) * 1000;\n  return text\n    .substring(i + 1)\n    .split(',')\n    .slice(1) // the first value is always None?\n    .map(d => +d);\n};\n\nconst DateFormatter = time => Math.floor(time / 1000);\n\nconst apiGraphite = context => ({\n  graphite: (host = '') => {\n    return {\n      toString: () => host, // Returns the graphite host.\n      find: (pattern, callback) => {\n        json(\n          host +\n            '/metrics/find?format=completer' +\n            '&query=' +\n            encodeURIComponent(pattern)\n        ).then(result => {\n          if (!result) return callback(new Error('unable to find metrics'));\n          callback(\n            null,\n            result.metrics.map(function(d) {\n              return d.path;\n            })\n          );\n        });\n      },\n      metric: expression => {\n        let sum = 'sum';\n\n        const metric = context.metric((start, stop, step, callback) => {\n          let target = expression;\n\n          // Apply the summarize, if necessary.\n          if (step !== 1e4)\n            target =\n              'summarize(' +\n              target +\n              \",'\" +\n              (!(step % 36e5)\n                ? step / 36e5 + 'hour'\n                : !(step % 6e4)\n                  ? step / 6e4 + 'min'\n                  : step / 1e3 + 'sec') +\n              \"','\" +\n              sum +\n              \"')\";\n\n          text(\n            host +\n            '/render?format=raw' +\n            '&target=' +\n            encodeURIComponent('alias(' + target + \",'')\") +\n            '&from=' +\n            DateFormatter(start - 2 * step) + // off-by-two?\n              '&until=' +\n              DateFormatter(stop - 1000)\n          ).then(text => {\n            if (!text) return callback(new Error('unable to load data'));\n            callback(null, parseGraphite(text));\n          });\n        }, (expression += ''));\n\n        metric.summarize = _sum => {\n          sum = _sum;\n          return metric;\n        };\n\n        return metric;\n      },\n    };\n  },\n});\n\nexport default apiGraphite;\n","const apiRemove = state => ({\n  remove: selection => {\n    const { context } = state;\n    const _remove = d => {\n      d.primary.on('change.comparison-' + d.id, null);\n      d.secondary.on('change.comparison-' + d.id, null);\n      context.on('change.comparison-' + d.id, null);\n      context.on('focus.comparison-' + d.id, null);\n    };\n\n    selection.on('mousemove.comparison', null).on('mouseout.comparison', null);\n    selection\n      .selectAll('canvas')\n      .each(_remove)\n      .remove();\n\n    selection.selectAll('.title,.value').remove();\n  },\n});\n\nexport default apiRemove;\n","const apiMisc = state => ({\n  height: (_ = null) => {\n    if (_ === null) return state._height;\n    state._height = +_;\n    return state;\n  },\n  primary: (_ = null) => {\n    if (_ === null) return state._primary;\n    state._primary = primary;\n    return state;\n  },\n  secondary: (_ = null) => {\n    if (_ === null) return state._secondary;\n    state._secondary = _;\n    return state;\n  },\n  extent: (_ = null) => {\n    if (_ === null) return state._extent;\n    state._extent = _;\n    return state;\n  },\n  scale: (_ = null) => {\n    if (_ === null) return state._scale;\n    state._scale = _;\n    return state;\n  },\n  title: (_ = null) => {\n    if (_ === null) return state._title;\n    state._title = _;\n    return state;\n  },\n  formatPrimary: (_ = null) => {\n    if (_ === null) return state._formatPrimary;\n    state._formatPrimary = _;\n    return state;\n  },\n  formatChange: (_ = null) => {\n    if (_ === null) return state._formatChange;\n    state._formatChange = _;\n    return state;\n  },\n  colors: (_ = null) => {\n    if (_ === null) return state._colors;\n    state._colorscolors = _;\n    return state;\n  },\n  strokeWidth: (_ = null) => {\n    if (_ === null) return state._strokeWidth;\n    state._strokeWidth = _;\n    return state;\n  },\n});\n\nexport default apiMisc;\n","const s4 = () =>\n  Math.floor((1 + Math.random()) * 0x10000)\n    .toString(16)\n    .substring(1);\n\nconst uuid = () =>\n  s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n\nexport default uuid;\n","import { select } from 'd3-selection';\nimport * as d3 from 'd3';\nimport uuid from '../uuid';\n\nconst roundEven = i => i & 0xfffffe;\nconst roundOdd = i => ((i + 1) & 0xfffffe) - 1;\n\nconst apiRender = state => ({\n  render: selection => {\n    const {\n      context,\n      _width,\n      _height,\n      _scale,\n      _primary,\n      _secondary,\n      _extent,\n      _title,\n      _formatPrimary,\n      _formatChange,\n      _colors,\n      _strokeWidth,\n    } = state;\n\n    selection\n      .on('mousemove.comparison', function() {\n        // todo, why directly d3.mouse doesn't work?\n        context.focus(Math.round(d3.mouse(this)[0]));\n      })\n      .on('mouseout.comparison', () => context.focus(null));\n\n    selection\n      .append('canvas')\n      .attr('width', _width)\n      .attr('height', _height);\n\n    selection\n      .append('span')\n      .attr('class', 'title')\n      .text(_title);\n\n    selection.append('span').attr('class', 'value primary');\n    selection.append('span').attr('class', 'value change');\n\n    selection.each(function(d, i) {\n      const id = uuid(),\n        primary_ =\n          typeof _primary === 'function' ? _primary.call(this, d, i) : _primary,\n        secondary_ =\n          typeof _secondary === 'function'\n            ? _secondary.call(this, d, i)\n            : _secondary,\n        extent_ =\n          typeof _extent === 'function' ? _extent.call(this, d, i) : _extent,\n        div = select(this),\n        canvas = div.select('canvas'),\n        spanPrimary = div.select('.value.primary'),\n        spanChange = div.select('.value.change');\n\n      let ready = null;\n\n      canvas.datum({ id: id, primary: primary_, secondary: secondary_ });\n      const canvasContext = canvas.node().getContext('2d');\n\n      function change(start, stop) {\n        canvasContext.save();\n        canvasContext.clearRect(0, 0, _width, _height);\n\n        // update the scale\n        const primaryExtent = primary_.extent(),\n          secondaryExtent = secondary_.extent(),\n          extent = extent_ == null ? primaryExtent : extent_;\n        _scale.domain(extent).range([_height, 0]);\n        ready = primaryExtent.concat(secondaryExtent).every(isFinite);\n\n        // consistent overplotting\n        const round = (start / context.step()) & 1 ? roundOdd : roundEven;\n\n        // positive changes\n        canvasContext.fillStyle = _colors[2];\n        for (let i = 0, n = _width; i < n; ++i) {\n          const y0 = _scale(primary_.valueAt(i)),\n            y1 = _scale(secondary_.valueAt(i));\n          if (y0 < y1) canvasContext.fillRect(round(i), y0, 1, y1 - y0);\n        }\n\n        // negative changes\n        canvasContext.fillStyle = _colors[0];\n        for (let i = 0, n = _width; i < n; ++i) {\n          const y0 = _scale(primary_.valueAt(i)),\n            y1 = _scale(secondary_.valueAt(i));\n          if (y0 > y1) canvasContext.fillRect(round(i), y1, 1, y0 - y1);\n        }\n\n        // positive values\n        canvasContext.fillStyle = _colors[3];\n        for (let i = 0, n = _width; i < n; ++i) {\n          const y0 = _scale(primary_.valueAt(i)),\n            y1 = _scale(secondary_.valueAt(i));\n          if (y0 <= y1) canvasContext.fillRect(round(i), y0, 1, _strokeWidth);\n        }\n\n        // negative values\n        canvasContext.fillStyle = _colors[1];\n        for (let i = 0, n = _width; i < n; ++i) {\n          const y0 = _scale(primary_.valueAt(i)),\n            y1 = _scale(secondary_.valueAt(i));\n          if (y0 > y1)\n            canvasContext.fillRect(\n              round(i),\n              y0 - _strokeWidth,\n              1,\n              _strokeWidth\n            );\n        }\n\n        canvasContext.restore();\n      }\n\n      const focus = (i = _width - 1) => {\n        const valuePrimary = primary_.valueAt(i),\n          valueSecondary = secondary_.valueAt(i),\n          valueChange = (valuePrimary - valueSecondary) / valueSecondary;\n\n        spanPrimary\n          .datum(valuePrimary)\n          .text(isNaN(valuePrimary) ? null : _formatPrimary);\n\n        spanChange\n          .datum(valueChange)\n          .text(isNaN(valueChange) ? null : _formatChange)\n          .attr(\n            'class',\n            'value change ' +\n              (valueChange > 0 ? 'positive' : valueChange < 0 ? 'negative' : '')\n          );\n      };\n\n      const firstChange = (start, stop) => {\n        change(start, stop);\n        focus();\n        if (ready) {\n          primary_.on('change.comparison-' + id, d => d);\n          secondary_.on('change.comparison-' + id, d => d);\n        }\n      };\n\n      // Display the first primary change immediately,\n      // but defer subsequent updates to the context change.\n      // Note this someone still needs to listen to the metric,\n      // so this it continues to update automatically.\n      primary_.on('change.comparison-' + id, firstChange);\n      secondary_.on('change.comparison-' + id, firstChange);\n\n      // Update the chart when the context changes.\n      context.on('change.comparison-' + id, change);\n      context.on('focus.comparison-' + id, focus);\n    });\n  },\n});\n\nexport default apiRender;\n","import { scaleLinear } from 'd3-scale';\nimport { interpolateRound } from 'd3-interpolate';\nimport { format } from 'd3-format';\n\nimport apiRemove from './apiRemove';\nimport apiMisc from './apiMisc';\nimport apiRender from './apiRender';\n\nconst initState = context => ({\n  context,\n  _width: context.size(),\n  _height: 120,\n  _scale: scaleLinear().interpolate(interpolateRound),\n  _primary: d => d[0],\n  _secondary: d => d[1],\n  _extent: null,\n  _title: d => d,\n  _formatPrimary: format('.2s'),\n  _formatChange: format('+.0%'),\n  _colors: ['#9ecae1', '#225b84', '#a1d99b', '#22723a'],\n  _strokeWidth: 1.5,\n});\n\nconst apiComparison = context => ({\n  comparison: () => {\n    const state = initState(context);\n\n    return Object.assign(\n      state,\n      apiRemove(state),\n      apiMisc(state),\n      apiRender(state)\n    );\n  },\n});\n\nexport default apiComparison;\n","import { dispatch } from 'd3-dispatch';\nimport { scaleTime } from 'd3-scale';\nimport { select, event } from 'd3-selection';\nimport apiStart from './apiStart';\nimport apiStop from './apiStop';\nimport apiOn from './apiOn';\nimport apiFocus from './apiFocus';\nimport apiClientDelay from './apiClientDelay';\nimport apiServerDelay from './apiServerDelay';\nimport apiSize from './apiSize';\nimport apiStep from './apiStep';\nimport update from './update';\n\nimport apiMetric from '../metric';\nimport apiCube from './apiCube';\nimport apiAxis from './apiAxis';\nimport apiRule from './apiRule';\nimport apiHorizon from '../horizon';\n\nimport apiGangliaWeb from './apiGangliaWeb';\nimport apiLibrato from '../librato';\nimport apiGraphite from './apiGraphite';\nimport apiComparison from '../comparison';\n\nconst config = {\n  id: 1,\n  step: 1e4, // ten seconds, in milliseconds\n  size: 1440, // ten seconds, in milliseconds\n  serverDelay: 5e3,\n  clientDelay: 5e3,\n  event: dispatch('prepare', 'beforechange', 'change', 'focus'),\n  start0: null,\n  stop0: null, // the start and stop for the previous change event\n  start1: null,\n  stop1: null, // the start and stop for the next prepare event\n  timeout: null,\n  focus: null,\n  scale: scaleTime().range([0, 1440]),\n};\n\nconst context = () => {\n  const state = {\n    _id: 1,\n    _step: 1e4, // ten seconds, in milliseconds\n    _size: 1440, // ten seconds, in milliseconds\n    _serverDelay: 5e3,\n    _clientDelay: 5e3,\n    _event: dispatch('prepare', 'beforechange', 'change', 'focus'),\n    _start0: null,\n    _stop0: null, // the start and stop for the previous change event\n    _start1: null,\n    _stop1: null, // the start and stop for the next prepare event\n    _timeout: null,\n    _focus: null,\n    _scale: scaleTime().range([0, 1440]),\n  };\n\n  const _context = Object.assign(\n    state,\n    apiAxis(state),\n    apiComparison(state),\n    apiCube(state),\n    apiClientDelay(state),\n    apiFocus(state),\n    apiMetric(state),\n    apiOn(state),\n    apiRule(state),\n    apiServerDelay(state),\n    apiSize(state),\n    apiStart(state),\n    apiStop(state),\n    apiStep(state)\n  );\n\n  state._timeout = setTimeout(_context.start, 10);\n\n  const { focus } = _context;\n\n  select(window).on('keydown.context-' + ++_context._id, function() {\n    switch (!event.metaKey && event.keyCode) {\n      case 37: // left\n        if (focus == null) _context.focus = size - 1;\n        if (focus > 0) _context.focus(--_context.focus);\n        break;\n      case 39: // right\n        if (focus == null) _context.focus = size - 2;\n        if (focus < size - 1) _context.focus(++_context.focus);\n        break;\n      default:\n        return;\n    }\n\n    event.preventDefault();\n  });\n\n  const cubismContext = update(_context);\n\n  return Object.assign(\n    cubismContext,\n    apiHorizon(cubismContext),\n    apiGangliaWeb(cubismContext),\n    apiLibrato(cubismContext),\n    apiGraphite(cubismContext)\n  );\n};\n\nexport default context;\n","const options = (name, defaultValues = null) => {\n  const options = location.search.substring(1).split('&'),\n    values = [],\n    n = options.length;\n\n  let i = -1,\n    o;\n  while (++i < n) {\n    if ((o = options[i].split('='))[0] === name) {\n      values.push(decodeURIComponent(o[1]));\n    }\n  }\n  return values.length || !defaultValues ? values : defaultValues;\n};\n\nconst option = (name, defaultValue) => {\n  const values = options(name);\n  return values.length ? values[0] : defaultValue;\n};\n\nexport { options, option };\n"],"names":["apiStart","_timeout","state","_stop1","_serverDelay","_clientDelay","_step","_event","_scale","_size","_focus","clearTimeout","delay","Date","now","prepare","Math","floor","_start1","call","start0","stop0","domain","timeout","setTimeout","apiStop","apiOn","type","listener","_start0","_stop0","on","test","apiFocus","i","update","apiClientDelay","apiServerDelay","apiSize","range","apiStep","apiAlias","toString","name","apiExtent","_values","value","min","Infinity","max","beforechange","start1","stop1","isFinite","_start","splice","round","_stop","request","stop","_fetching","steps","_steps","error","data","console","warn","j","m","length","_id","context","_listening","MetricOverlap","apiPrepare","metricShift","offset","start","step","callback","apiShift","metric","apiValueAt","genericOperate","operate","Object","assign","valueAt","shift","apiOperator","a","b","apiToString","apiMetric","metricState","size","dispatch","apiCube","host","encodeURIComponent","expression","isoFormat","then","Error","map","d","formatSeconds","timeFormat","formatMinutes","formatDays","formatDefault","apiRemove","axisState","selectAll","each","id","remove","apiFocusFormat","_","format","apiRender","_axis","scale","tick","g","selection","append","datum","attr","tickSize","select","node","appendChild","cloneNode","style","text","invert","dx","getComputedTextLength","abs","apiTicks","args","ticks","apiOrient","axisSate","orient","axisTop","axisBottom","axisLeft","axisRight","apiAxis","ruleState","_context","_metric","line","metric_","change","values","n","push","lines","exit","enter","apiRule","_width","_height","_title","_colors","_extent","_buffer","_mode","_format","focus","d3","colors_","extent_","canvas","span","max_","y1","ready","ctx","getContext","save","extent","every","i0","canvas0","clearRect","drawImage","negative","fillStyle","y0","undefined","fillRect","translate","restore","isNaN","apiMisc","height","apiHorizon","buffer","document","createElement","width","scaleLinear","interpolate","interpolateRound","apiGangliaWeb","config","uriPathPrefix","clusterName","metricInfo","metricName","hostName","onChangeCallback","isReport","defaultTitleGenerator","titleGenerator","metricKeyName","metricFn","constructGangliaWebRequestQueryParams","result","catch","e","gangliaWebMetric","downUpSampling","isdate","iedate","librato_mm","av","int_mes","measure_time","v","reduce","findIdealLibratoRFesolution","avail_rsts","highest_res","lowest_res","iof","top_res","indexOf","low_res","findLibratoResolution","sdate","edate","i_size","week","two_days","month","ideal_res","make_url","composite","url_prefix","params","user","token","callback_done","a_values","full_url","makeUrl","auth_string","btoa","header","cubism","version","measurements","series","forEach","o","still_more_values","query","next_time","a_adjusted","DateFormatter","time","apiLibrato","m_composite","fire","parseGraphite","meta","substring","c","lastIndexOf","split","slice","apiGraphite","pattern","metrics","path","sum","target","summarize","_sum","_remove","primary","secondary","_primary","_secondary","_formatPrimary","_formatChange","_colorscolors","_strokeWidth","s4","random","uuid","roundEven","roundOdd","primary_","secondary_","div","spanPrimary","spanChange","canvasContext","primaryExtent","secondaryExtent","concat","valuePrimary","valueSecondary","valueChange","firstChange","initState","apiComparison","scaleTime","window","event","metaKey","keyCode","preventDefault","cubismContext","options","defaultValues","location","search","decodeURIComponent","option","defaultValue"],"mappings":"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"}