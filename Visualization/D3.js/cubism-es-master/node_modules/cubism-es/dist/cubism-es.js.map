{"version":3,"file":"cubism-es.js","sources":["../src/context/apiStart.js","../src/context/apiStop.js","../src/context/apiOn.js","../src/context/apiFocus.js","../src/context/update.js","../src/context/apiClientDelay.js","../src/context/apiServerDelay.js","../src/context/apiSize.js","../src/context/apiStep.js","../src/metric/apiAlias.js","../src/metric/apiExtent.js","../src/metric/apiOn.js","../src/metric/apiPrepare.js","../src/metric/apiShift.js","../src/metric/apiValueAt.js","../src/metric/apiOperator.js","../src/metric/index.js","../src/context/apiCube.js","../src/context/apiAxis.js","../src/context/apiRule.js","../src/horizon/apiRender.js","../src/horizon/apiMisc.js","../src/horizon/apiRemvoe.js","../src/horizon/index.js","../src/context/apiGangliaWeb.js","../src/librato/downUpSampling.js","../src/librato/findIdealLibratoRFesolution.js","../src/librato/findLibratoResolution.js","../src/librato/makeUrl.js","../src/librato/request.js","../src/librato/index.js","../src/context/apiGraphite.js","../src/comparison/apiRemove.js","../src/comparison/apiMisc.js","../src/uuid.js","../src/comparison/apiRender.js","../src/comparison/index.js","../src/context/index.js","../src/option.js"],"sourcesContent":["const apiStart = state => ({\n  start: () => {\n    const {\n      _timeout,\n      _stop1,\n      _serverDelay,\n      _clientDelay,\n      _step,\n      _event,\n      _scale,\n      _size,\n      _focus,\n    } = state;\n\n    if (_timeout) clearTimeout(_timeout);\n    let delay = +_stop1 + _serverDelay - Date.now();\n\n    // If we're too late for the first prepare _event, skip it.\n    if (delay < _clientDelay) delay += _step;\n\n    const prepare = () => {\n      state._stop1 = new Date(\n        Math.floor((Date.now() - _serverDelay) / _step) * _step\n      );\n      state._start1 = new Date(state._stop1 - _size * _step);\n      _event.call('prepare', state, state._start1, state._stop1);\n\n      setTimeout(() => {\n        state.start0 = state._start1;\n        state.stop0 = state._stop1;\n        _scale.domain([state.start0, state.stop0]);\n        _event.call('beforechange', state, state._start1, state._stop1);\n        _event.call('change', state, state._start1, state._stop1);\n        _event.call('focus', state, _focus);\n      }, _clientDelay);\n\n      state.timeout = setTimeout(prepare, _step);\n    };\n\n    state.timeout = setTimeout(prepare, delay);\n\n    return state;\n  },\n});\n\nexport default apiStart;\n","const apiStop = state => ({\n  stop: () => {\n    state._timeout = clearTimeout(state._timeout);\n    return state;\n  },\n});\n\nexport default apiStop;\n","const apiOn = state => ({\n  on: (type, listener = null) => {\n    const { _event, _focus, _start1, _stop1, _start0, _stop0 } = state;\n    if (listener === null) return _event.on(type);\n\n    _event.on(type, listener);\n\n    // Notify the listener of the current start and stop time, as appropriate.\n    // This way, metrics can make requests for data immediately,\n    // and likewise the axis can display itself synchronously.\n    if (/^prepare(\\.|$)/.test(type)) listener(_start1, _stop1);\n    if (/^beforechange(\\.|$)/.test(type)) listener(_start0, _stop0);\n    if (/^change(\\.|$)/.test(type)) listener(_start0, _stop0);\n    if (/^focus(\\.|$)/.test(type)) listener(_focus);\n\n    return state;\n  },\n});\n\nexport default apiOn;\n","const apiFocus = state => ({\n  focus: i => {\n    const { _event } = state;\n    _event.call('focus', state, (state._focus = i));\n    return state;\n  },\n});\n\nexport default apiFocus;\n","const update = state => {\n  const { _step, _serverDelay, _clientDelay, _scale, _size } = state;\n  const now = Date.now();\n  state._stop0 = new Date(\n    Math.floor((now - _serverDelay - _clientDelay) / _step) * _step\n  );\n  state._start0 = new Date(state._stop0 - _size * _step);\n  state._stop1 = new Date(Math.floor((now - _serverDelay) / _step) * _step);\n  state._start1 = new Date(state._stop1 - _size * _step);\n  _scale.domain([state._start0, state._stop0]);\n  return state;\n};\n\nexport default update;\n","import update from './update';\n\n// The client delay is the amount of additional time we wait to fetch those\n// metrics from the server. The client and server delay combined represent the\n// age of the most recent displayed metric. Defaults to 1 second.\nconst apiClientDelay = state => ({\n  clientDelay: (_clientDelay = null) => {\n    if (_clientDelay === null) return state._clientDelay;\n    state._clientDelay = +_clientDelay;\n    return update(state);\n  },\n});\n\nexport default apiClientDelay;\n","import update from './update';\n\n// The server delay is the amount of time we wait for the server to compute a\n// metric. This delay may result from clock skew or from delays collecting\n// metrics from various hosts. Defaults to 4 seconds.\nconst apiServerDelay = state => ({\n  serverDelay: (_serverDelay = null) => {\n    if (_serverDelay === null) return state._serverDelay;\n    state._serverDelay = +_serverDelay;\n    return update(state);\n  },\n});\n\nexport default apiServerDelay;\n","import update from './update';\n\n// Set or get the context size (the count of metric values).\n// Defaults to 1440 (four hours at ten seconds).\nconst apiSize = state => ({\n  size: (_size = null) => {\n    if (_size === null) return state._size;\n    state._scale.range([0, (state._size = +_size)]);\n    return update(state);\n  },\n});\n\nexport default apiSize;\n","import update from './update';\n\n// Set or ge2t the step interval in milliseconds.\n// Defaults to ten seconds.\nconst apiStep = state => ({\n  step: (_step = null) => {\n    if (_step === null) return state._step;\n    state._step = +_step;\n    return update(state);\n  },\n});\n\nexport default apiStep;\n","const apiAlias = state => ({\n  alias: name => {\n    state.toString = () => name;\n    return state;\n  },\n});\n\nexport default apiAlias;\n","const apiExtent = state => ({\n  extent: () => {\n    const { _size, _values } = state;\n    let i = 0,\n      value,\n      min = Infinity,\n      max = -Infinity;\n    while (++i < _size) {\n      value = _values[i];\n      if (value < min) min = value;\n      if (value > max) max = value;\n    }\n    return [min, max];\n  },\n});\n\nexport default apiExtent;\n","// When the context changes, switch to the new data, ready-or-not!\nconst beforechange = state => (start1, stop1) => {\n  const { _step, _size } = state;\n  if (!isFinite(state._start)) state._start = start1;\n  state._values.splice(\n    0,\n    Math.max(0, Math.min(_size, Math.round((start1 - state._start) / _step)))\n  );\n  state._start = start1;\n  state._stop = stop1;\n};\n\n// Prefetch new data into a temporary array.\nconst prepare = (state, request) => (start1, stop) => {\n  const { _start, _step, _fetching, _event, _size } = state;\n  const steps = Math.min(_size, Math.round((start1 - _start) / _step));\n  if (!steps || _fetching) return; // already fetched, or fetching!\n  state._fetching = true;\n  state._steps = Math.min(_size, steps + 6);\n  const start0 = new Date(stop - state._steps * _step);\n  request(start0, stop, _step, function(error, data) {\n    state._fetching = false;\n    if (error) return console.warn(error);\n    const i = isFinite(_start) ? Math.round((start0 - _start) / _step) : 0;\n    for (let j = 0, m = data.length; j < m; ++j) state._values[j + i] = data[j];\n    _event.call('change', _start, stop);\n  });\n};\n\nconst apiOn = (state, request) => ({\n  on: (type, listener = null) => {\n    const { _event, _id, context, _start, _stop } = state;\n\n    if (listener === null) return _event.on(type);\n\n    // If there are no listeners, then stop listening to the context,\n    // and avoid unnecessary fetches.\n    if (listener == null) {\n      if (_event.on(type) != null && --state._listening === 0) {\n        context.on('prepare' + _id, null).on('beforechange' + _id, null);\n      }\n    } else {\n      if (_event.on(type) == null && ++state._listening === 1) {\n        context\n          .on('prepare' + _id, prepare(state, request))\n          .on('beforechange' + _id, beforechange(state));\n      }\n    }\n\n    _event.on(type, listener);\n\n    // Notify the listener of the current start and stop time, as appropriate.\n    // This way, charts can display synchronous metrics immediately.\n    if (listener != null) {\n      if (/^change(\\.|$)/.test(type)) listener(_start, _stop);\n    }\n\n    return state;\n  },\n});\n\nexport default apiOn;\n","// Number of metric to refetch each period, in case of lag.\nconst MetricOverlap = 6;\n\n// Prefetch new data into a temporary array.\nconst apiPrepare = (state, request) => ({\n  prepare: (start1, stop) => {\n    const { _size, _start, _step, _fetching, _event } = state;\n\n    const steps = Math.min(_size, Math.round((start1 - _start) / _step));\n    if (!steps || _fetching === true) return; // already fetched, or fetching!\n    state._fetching = true;\n    state._steps = Math.min(_size, steps + MetricOverlap);\n    const start0 = new Date(stop - steps * _step);\n\n    request(start0, stop, _step, function(error, data) {\n      state._fetching = false;\n      if (error) return console.warn(error);\n      const i = isFinite(_start) ? Math.round((start0 - _start) / _step) : 0;\n      for (let j = 0, m = data.length; j < m; ++j) values[j + i] = data[j];\n      _event.call('change', state, _start, stop);\n    });\n  },\n});\n\nexport default apiPrepare;\n","// Wraps the specified request implementation, and shifts time by the given offset.\nconst metricShift = (request, offset) => (start, stop, step, callback) =>\n  request(new Date(+start + offset), new Date(+stop + offset), step, callback);\n\nconst apiShift = (state, request) => ({\n  shift: offset => {\n    const { context } = state;\n\n    return context.metric(metricShift(request, +offset));\n  },\n});\n\nexport default apiShift;\n","const apiValueAt = state => ({\n  valueAt: i => state._values[i],\n});\n\nexport default apiValueAt;\n","const genericOperate = (name, operate) => (state, metric) => {\n  return Object.assign(\n    {},\n    state,\n    {\n      valueAt: i => operate(state.valueAt(i), metric.valueAt(i)),\n      toString: () => `${state} ${name} ${metric}`,\n      on: (type, listener = null) => {\n        if (listener === null) return state.on(type);\n        state.on(type, listener);\n        metric.on(type, listener);\n      },\n    },\n    {\n      shift: offset =>\n        genericOperate(name, operate)(\n          state.shift(offset),\n          metric.shift(offset)\n        ),\n    }\n  );\n};\n\nconst apiOperator = state => ({\n  add: metric => genericOperate('+', (a, b) => a + b)(state, metric),\n  subtract: metric => genericOperate('-', (a, b) => a - b)(state, metric),\n  multiply: metric => genericOperate('*', (a, b) => a * b)(state, metric),\n  divide: metric => genericOperate('/', (a, b) => a / b)(state, metric),\n});\n\nexport default apiOperator;\n","import { dispatch } from 'd3-dispatch';\n\nimport apiAlias from './apiAlias';\nimport apiExtent from './apiExtent';\nimport apiOn from './apiOn';\nimport apiPrepare from './apiPrepare';\nimport apiShift from './apiShift';\nimport apiValueAt from './apiValueAt';\nimport apiOperator from './apiOperator';\n\nconst apiToString = name => ({\n  toString: () => name,\n});\n\nconst apiMetric = context => ({\n  metric: (request, name) => {\n    const metricState = {\n      context,\n      _id: '.metric-' + ++context._id,\n      _start: -Infinity,\n      _stop: null,\n      _step: context.step(),\n      _size: context.size(),\n      _values: [],\n      _event: dispatch('change'),\n      _listening: 0,\n      _fetching: false,\n    };\n\n    const metric = Object.assign(\n      metricState,\n      apiOn(metricState, request),\n      apiPrepare(metricState, request),\n      apiValueAt(metricState),\n      apiAlias(metricState),\n      apiShift(metricState, request),\n      apiExtent(metricState),\n      apiToString(name)\n    );\n\n    return Object.assign(metric, apiOperator(metric));\n  },\n});\n\nexport default apiMetric;\n","import { isoFormat } from 'd3-time-format';\nimport { json } from 'd3-fetch';\n\nconst apiCube = context => ({\n  cube: (host = '') => ({\n    toString: () => host,\n    metric: expression => {\n      return context.metric((start, stop, step, callback) => {\n        json(\n          host +\n            '/1.0/metric' +\n            '?expression=' +\n            encodeURIComponent(expression) +\n            '&start=' +\n            isoFormat(start) +\n            '&stop=' +\n            isoFormat(stop) +\n            '&step=' +\n            step\n        ).then(data => {\n          if (!data) return callback(new Error('unable to load data'));\n          callback(null, data.map(d => d.value));\n        });\n      }, (expression += ''));\n    },\n  }),\n});\n\nexport default apiCube;\n","import { timeFormat } from 'd3-time-format';\nimport { axisBottom, axisLeft, axisRight, axisTop } from 'd3-axis';\nimport { select } from 'd3-selection';\n\nconst formatSeconds = timeFormat('%I:%M:%S %p');\nconst formatMinutes = timeFormat('%I:%M %p');\nconst formatDays = timeFormat('%B %d');\nconst formatDefault = context =>\n  context.step() < 6e4\n    ? formatSeconds\n    : context.step() < 864e5\n      ? formatMinutes\n      : formatDays;\n\nconst apiRemove = axisState => ({\n  remove: selection => {\n    const { context } = axisState;\n    selection\n      .selectAll('svg')\n      .each(d => {\n        context.on('change.axis-' + d.id, null);\n        context.on('focus.axis-' + d.id, null);\n      })\n      .remove();\n  },\n});\n\nconst apiFocusFormat = axisState => ({\n  focusFormat: (_ = null) => {\n    if (_ === null)\n      return axisState.format === formatDefault(axisState.context) ? null : _;\n    axisState.format = _ == null ? formatDefault(context) : _;\n    return axisState;\n  },\n});\n\nconst apiRender = (context, state) => ({\n  render: selection => {\n    const { _axis, scale, format, id, size } = state;\n    let tick = null;\n\n    const g = selection\n      .append('svg')\n      .datum({ id })\n      .attr('width', size)\n      .attr('height', Math.max(28, -_axis.tickSize()))\n      .append('g')\n      .attr('transform', 'translate(0,' + 4 + ')')\n      .call(_axis);\n\n    context.on('change.axis-' + id, () => {\n      g.call(_axis);\n      if (!tick)\n        tick = select(\n          g.node().appendChild(\n            g\n              .selectAll('text')\n              .node()\n              .cloneNode(true)\n          )\n        )\n          .style('display', 'none')\n          .text(null);\n    });\n\n    context.on('focus.axis-' + id, i => {\n      if (tick) {\n        if (i == null) {\n          tick.style('display', 'none');\n          g.selectAll('text').style('fill-opacity', null);\n        } else {\n          tick\n            .style('display', null)\n            .attr('x', i)\n            .text(format(scale.invert(i)));\n          const dx = tick.node().getComputedTextLength() + 6;\n          g\n            .selectAll('text')\n            .style('fill-opacity', d => (Math.abs(scale(d) - i) < dx ? 0 : 1));\n        }\n      }\n    });\n  },\n});\n\nconst apiTicks = axisState => ({\n  ticks: (...args) => {\n    axisState._axis.ticks(args);\n    return axisState;\n  },\n});\n\nconst apiOrient = axisSate => ({\n  orient: orient => {\n    const { context } = axisSate;\n    switch (orient) {\n      case 'top':\n        axisSate._axis = axisTop().scale(context._scale);\n        break;\n      case 'bottom':\n        axisSate._axis = axisBottom().scale(context._scale);\n        break;\n      case 'left':\n        axisSate._axis = axisLeft().scale(context._scale);\n        break;\n      case 'right':\n        axisSate._axis = axisRight().scale(context._scale);\n        break;\n      case 'default':\n        console.warn('orient shall be one of bottom|top|left|right');\n        break;\n      default:\n        console.warn('orient shall be one of bottom|top|left|right');\n        break;\n    }\n\n    return axisSate;\n  },\n});\n\nconst apiAxis = context => ({\n  axis: () => {\n    const axisState = {\n      context,\n      size: context._size,\n      scale: context._scale,\n      _axis: axisBottom().scale(context._scale),\n      format: formatDefault(context),\n      id: ++context._id,\n    };\n\n    return Object.assign(\n      axisState,\n      apiRemove(axisState),\n      apiFocusFormat(axisState),\n      apiTicks(axisState),\n      apiOrient(axisState),\n      apiRender(context, axisState)\n    );\n  },\n});\n\nexport default apiAxis;\n","const apiRemove = (ruleState, selection) => ({\n  remove: () => {\n    const { _context } = ruleState;\n\n    selection\n      .selectAll('.line')\n      .each(d => _context.on('focus.rule-' + d.id, null))\n      .remove();\n  },\n});\n\nconst apiMetric = ruleState => ({\n  metric: (metric = null) => {\n    if (metric === null) return ruleState._metric;\n    ruleState._metric = metric;\n    return ruleState;\n  },\n});\n\nconst apiRender = state => ({\n  render: selection => {\n    const { _context, _metric } = state;\n    const id = ++_context._id;\n\n    const line = selection\n      .append('div')\n      .datum({ id: id })\n      .attr('class', 'line')\n      .style('position', 'absolute')\n      .style('top', 0)\n      .style('bottom', 0)\n      .style('width', '1px')\n      .style('pointer-events', 'none');\n\n    selection.each((d, i) => {\n      const metric_ = typeof _metric === 'function' ? _metric(d, i) : _metric;\n      if (!metric_) return;\n\n      const change = (start, stop) => {\n        const values = [];\n\n        for (let i = 0, n = _context.size(); i < n; ++i) {\n          if (metric_.valueAt(i)) {\n            values.push(i);\n          }\n        }\n\n        const lines = selection.selectAll('.metric').data(values);\n        lines.exit().remove();\n        lines\n          .enter()\n          .append('div')\n          .attr('class', 'metric line')\n          .style('position', 'absolute')\n          .style('top', 0)\n          .style('bottom', 0)\n          .style('width', '1px')\n          .style('pointer-events', 'none');\n\n        lines.style('left', i => i + 'px');\n      };\n\n      _context.on('change.rule-' + id, change);\n      metric_.on('change.rule-' + id, change);\n    });\n\n    _context.on('focus.rule-' + id, i => {\n      line\n        // .datum(i)\n        .style('display', i == null ? 'none' : null)\n        .style('left', i == null ? null : `${i}px`);\n    });\n  },\n});\n\nconst apiRule = context => ({\n  rule: () => {\n    const state = {\n      _context: context,\n      _metric: d => d,\n    };\n\n    return Object.assign(\n      state,\n      apiRemove(state),\n      apiMetric(state),\n      apiRender(state)\n    );\n  },\n});\n\nexport default apiRule;\n","import { select } from 'd3-selection';\nimport * as d3 from 'd3';\n\nconst apiRender = (context, state) => ({\n  render: selection => {\n    selection.append('div').attr('a', 'b');\n    const {\n      _width,\n      _height,\n      _title,\n      _metric,\n      _colors,\n      _extent,\n      _scale,\n      _buffer,\n      _mode,\n      _format,\n    } = state;\n\n    selection\n      .on('mousemove.horizon', function() {\n        // todo: why directly importing mouse doesn't work here?\n        context.focus(Math.round(d3.mouse(this)[0]));\n      })\n      .on('mouseout.horizon', () => context.focus(null));\n\n    selection\n      .append('canvas')\n      .attr('width', _width)\n      .attr('height', _height);\n\n    selection\n      .append('span')\n      .attr('class', 'title')\n      .text(_title);\n\n    selection.append('span').attr('class', 'value');\n\n    selection.each(function(d, i) {\n      const id = ++context._id,\n        metric_ = typeof _metric === 'function' ? _metric(d, i) : _metric,\n        colors_ = typeof _colors === 'function' ? _colors(d, i) : _colors,\n        extent_ = typeof _extent === 'function' ? _extent(d, i) : _extent,\n        step = context.step(),\n        canvas = select(this).select('canvas'),\n        span = select(this).select('.value'),\n        m = colors_.length >> 1;\n\n      let start = -Infinity,\n        max_,\n        y1,\n        ready;\n\n      canvas.datum({ id: id, metric: metric_ });\n      const ctx = canvas.node().getContext('2d');\n\n      function change(start1, stop) {\n        ctx.save();\n\n        // compute the new extent and ready flag\n        let extent = metric_.extent();\n        ready = extent.every(isFinite);\n        if (extent_ != null) extent = extent_;\n\n        // if this is an update (with no extent change), copy old values!\n        let i0 = 0,\n          max = Math.max(-extent[0], extent[1]);\n        if (this === context) {\n          if (max === max_) {\n            i0 = _width - 6;\n            const dx = (start1 - start) / step;\n            if (dx < _width) {\n              const canvas0 = _buffer.getContext('2d');\n              canvas0.clearRect(0, 0, _width, _height);\n              canvas0.drawImage(\n                ctx.canvas,\n                dx,\n                0,\n                _width - dx,\n                _height,\n                0,\n                0,\n                _width - dx,\n                _height\n              );\n              ctx.clearRect(0, 0, _width, _height);\n              ctx.drawImage(canvas0.canvas, 0, 0);\n            }\n          }\n          start = start1;\n        }\n\n        // update the domain\n        _scale.domain([0, (max_ = max)]);\n\n        // clear for the new data\n        ctx.clearRect(i0, 0, _width - i0, _height);\n\n        // record whether there are negative values to display\n        let negative;\n\n        // positive bands\n        for (let j = 0; j < m; ++j) {\n          ctx.fillStyle = colors_[m + j];\n\n          // Adjust the range based on the current band index.\n          let y0 = (j - m + 1) * _height;\n          _scale.range([m * _height + y0, y0]);\n          y0 = _scale(0);\n\n          for (let i = i0, n = _width, y1; i < n; ++i) {\n            y1 = metric_.valueAt(i);\n            if (y1 <= 0) {\n              negative = true;\n              continue;\n            }\n            if (y1 === undefined) continue;\n            ctx.fillRect(i, (y1 = _scale(y1)), 1, y0 - y1);\n          }\n        }\n\n        if (negative) {\n          // enable offset mode\n          if (_mode === 'offset') {\n            ctx.translate(0, _height);\n            ctx.scale(1, -1);\n          }\n\n          // negative bands\n          for (let j = 0; j < m; ++j) {\n            ctx.fillStyle = colors_[m - 1 - j];\n\n            // Adjust the range based on the current band index.\n            let y0 = (j - m + 1) * _height;\n            _scale.range([m * _height + y0, y0]);\n            y0 = _scale(0);\n\n            for (let i = i0, n = _width, y1; i < n; ++i) {\n              y1 = metric_.valueAt(i);\n              if (y1 >= 0) continue;\n              ctx.fillRect(i, _scale(-y1), 1, y0 - _scale(-y1));\n            }\n          }\n        }\n\n        ctx.restore();\n      }\n\n      const focus = i => {\n        if (i == null) i = _width - 1;\n        const value = metric_.valueAt(i);\n        span.datum(value).text(isNaN(value) ? null : _format);\n      };\n\n      // Update the chart when the context changes.\n      context.on('change.horizon-' + id, change);\n      context.on('focus.horizon-' + id, focus);\n\n      // Display the first metric change immediately,\n      // but defer subsequent updates to the canvas change.\n      // Note that someone still needs to listen to the metric,\n      // so that it continues to update automatically.\n      metric_.on('change.horizon-' + id, function(start, stop) {\n        change(start, stop), focus();\n        if (ready) metric_.on('change.horizon-' + id, d => d);\n      });\n    });\n  },\n});\n\nexport default apiRender;\n","const apiMisc = state => ({\n  mode: (_ = null) => {\n    if (_ === null) return state._mode;\n    state._mode = _ + '';\n    return state;\n  },\n\n  height: (_ = null) => {\n    if (_ === null) return state._height;\n    state._height = +_;\n    state._buffer.height = +_;\n    return state;\n  },\n\n  metric: (_ = null) => {\n    if (_ === null) return state._metric;\n    state._metric = _;\n    return state;\n  },\n\n  scale: (_ = null) => {\n    if (_ === null) return state._scale;\n    state._scale = _;\n    return state;\n  },\n\n  extent: (_ = null) => {\n    if (_ === null) return state._extent;\n    state._extent = _;\n    return state;\n  },\n\n  title: (_ = null) => {\n    if (_ === null) return state._title;\n    state._title = _;\n    return state;\n  },\n\n  format: (_ = null) => {\n    if (_ === null) return state._format;\n    state._format = _;\n    return state;\n  },\n  colors: (_ = null) => {\n    if (_ === null) return state._colors;\n    state._colors = _;\n    return state;\n  },\n});\n\nexport default apiMisc;\n","const apiRemove = context => ({\n  remove: selection => {\n    selection.on('mousemove.horizon', null).on('mouseout.horizon', null);\n\n    const remove = d => {\n      d.metric.on('change.horizon-' + d.id, null);\n      context.on('change.horizon-' + d.id, null);\n      context.on('focus.horizon-' + d.id, null);\n    };\n\n    selection\n      .selectAll('canvas')\n      .each(remove)\n      .remove();\n\n    selection.selectAll('._title,.value').remove();\n  },\n});\n\nexport default apiRemove;\n","import { scaleLinear } from 'd3-scale';\nimport { format } from 'd3-format';\nimport { interpolateRound } from 'd3-interpolate';\n\nimport apiRender from './apiRender';\nimport apiMisc from './apiMisc';\nimport apiRemove from './apiRemvoe';\n\nconst apiHorizon = context => ({\n  horizon: function() {\n    const buffer = document.createElement('canvas');\n    buffer.width = context.size();\n    buffer.height = 30;\n\n    const state = {\n      _mode: 'offset',\n      _buffer: buffer,\n      _width: buffer.width,\n      _height: buffer.height,\n      _scale: scaleLinear().interpolate(interpolateRound),\n      _metric: d => d,\n      _extent: null,\n      _title: d => d,\n      _format: format('.2s'),\n      _colors: [\n        '#08519c',\n        '#3182bd',\n        '#6baed6',\n        '#bdd7e7',\n        '#bae4b3',\n        '#74c476',\n        '#31a354',\n        '#006d2c',\n      ],\n    };\n\n    return Object.assign(\n      state,\n      apiRemove(state),\n      apiMisc(state),\n      apiRender(context, state)\n    );\n  },\n});\n\nexport default apiHorizon;\n","import { json } from 'd3-fetch';\n\nconst apiGangliaWeb = context => ({\n  gangliaWeb: config => {\n    const host = config.host || '';\n    let uriPathPrefix = config.uriPathPrefix || '/ganglia2/';\n\n    /* Add leading and trailing slashes, as appropriate. */\n    if (uriPathPrefix[0] !== '/') {\n      uriPathPrefix = '/' + uriPathPrefix;\n    }\n\n    if (uriPathPrefix[uriPathPrefix.length - 1] !== '/') {\n      uriPathPrefix += '/';\n    }\n\n    return {\n      toString: () => host + uriPathPrefix,\n      metric: metricInfo => {\n        /* Store the members from metricInfo into local variables. */\n        const {\n          clusterName,\n          metricName,\n          hostName,\n          onChangeCallback,\n        } = metricInfo;\n        const isReport =\n          metricInfo.isReport === undefined ? false : metricInfo.isReport;\n        /* Reasonable (not necessarily pretty) default for titleGenerator. */\n        const defaultTitleGenerator = unusedMetricInfo =>\n          `clusterName:${clusterName} metricName:${metricName} hostName:${hostName}`;\n        const titleGenerator =\n          metricInfo.titleGenerator || defaultTitleGenerator;\n\n        /* Default to plain, simple metrics. */\n        const metricKeyName = isReport ? 'g' : 'm';\n\n        const metricFn = (start, stop, step, callback) => {\n          const constructGangliaWebRequestQueryParams = () =>\n            `c=${clusterName}&${metricKeyName}=${metricName}&h=${hostName}` +\n            '&cs=' +\n            start / 1000 +\n            '&ce=' +\n            stop / 1000 +\n            '&step=' +\n            step / 1000 +\n            '&graphlot=1';\n\n          json(\n            host +\n              uriPathPrefix +\n              'graph.php?' +\n              constructGangliaWebRequestQueryParams()\n          )\n            .then(result => {\n              if (result === undefined || result === null) {\n                return callback(new Error('Unable to fetch GangliaWeb data'));\n              }\n\n              callback(null, result[0].data);\n            })\n            .catch(e =>\n              callback(new Error(`Unable to fetch GangliaWeb data: Error ${e}`))\n            );\n        };\n        titleGenerator(metricInfo);\n\n        const gangliaWebMetric = context.metric(metricFn);\n\n        gangliaWebMetric.toString = () => titleGenerator(metricInfo);\n\n        /* Allow users to run their custom code each time a gangliaWebMetric changes.\n         *\n         * TODO Consider abstracting away the naked Cubism call, and instead exposing\n         * a callback that takes in the values array (maybe alongwith the original\n         * start and stop 'naked' parameters), since it's handy to have the entire\n         * dataset at your disposal (and users will likely implement onChangeCallback\n         * primarily to get at this dataset).\n         */\n        if (onChangeCallback) {\n          gangliaWebMetric.on('change', onChangeCallback);\n        }\n\n        return gangliaWebMetric;\n      },\n    };\n  },\n});\n\nexport default apiGangliaWeb;\n","/*\n * We are most likely not going to get the same number of measurements\n * cubism expects for a particular context: We have to perform down/up\n * sampling\n */\nconst downUpSampling = (isdate, iedate, step, librato_mm) => {\n  const av = [];\n\n  for (let i = isdate; i <= iedate; i += step) {\n    const int_mes = [];\n    while (librato_mm.length && librato_mm[0].measure_time <= i) {\n      int_mes.push(librato_mm.shift().value);\n    }\n\n    let v;\n    if (int_mes.length) {\n      /* Compute the average */\n      v =\n        int_mes.reduce(function(a, b) {\n          return a + b;\n        }) / int_mes.length;\n    } else {\n      /* No librato values on interval */\n      v = av.length ? av[av.length - 1] : 0;\n    }\n    av.push(v);\n  }\n\n  return av;\n};\n\nexport default downUpSampling;\n","/* Given a step, find the best librato resolution to use.\n         *\n         * Example:\n         *\n         * (s) : cubism step\n         *\n         * avail_rsts   1 --------------- 60 --------------- 900 ---------------- 3600\n         *                                |    (s)            |\n         *                                |                   |\n         *                              [low_res             top_res]\n         *\n         * return: low_res (60)\n         */\nconst findIdealLibratoRFesolution = step => {\n  const avail_rsts = [1, 60, 900, 3600];\n  const highest_res = avail_rsts[0],\n    lowest_res = avail_rsts[avail_rsts.length]; // high and lowest available resolution from librato\n\n  /* If step is outside the highest or lowest librato resolution, pick them and we are done */\n  if (step >= lowest_res) return lowest_res;\n\n  if (step <= highest_res) return highest_res;\n\n  /* If not, find in what resolution interval the step lands. */\n  let iof, top_res, i;\n  for (i = step; i <= lowest_res; i++) {\n    iof = avail_rsts.indexOf(i);\n    if (iof > -1) {\n      top_res = avail_rsts[iof];\n      break;\n    }\n  }\n\n  let low_res;\n  for (i = step; i >= highest_res; i--) {\n    iof = avail_rsts.indexOf(i);\n    if (iof > -1) {\n      low_res = avail_rsts[iof];\n      break;\n    }\n  }\n\n  /* What's the closest librato resolution given the step ? */\n  return top_res - step < step - low_res ? top_res : low_res;\n};\n\nexport default findIdealLibratoRFesolution;\n","import findIdealLibratoRFesolution from './findIdealLibratoRFesolution';\n\nconst findLibratoResolution = (sdate, edate, step) => {\n  const i_size = edate - sdate, // interval size\n    month = 2419200,\n    week = 604800,\n    two_days = 172800;\n\n  if (i_size > month) return 3600;\n\n  const ideal_res = findIdealLibratoRFesolution(step);\n\n  /*\n     * Now we have the ideal resolution, but due to the retention policies at librato, maybe we have\n     * to use a higher resolution.\n     * http://support.metrics.librato.com/knowledgebase/articles/66838-understanding-metrics-roll-ups-retention-and-grap\n     */\n  if (i_size > week && ideal_res < 900) return 900;\n  else if (i_size > two_days && ideal_res < 60) return 60;\n  else return ideal_res;\n};\n\nexport default findLibratoResolution;\n","import findLibratoResolution from './findLibratoResolution';\n\nconst make_url = (sdate, edate, step, composite) => {\n  const url_prefix = 'https://metrics-api.librato.com/v1/metrics';\n  const params =\n    'compose=' +\n    composite +\n    '&start_time=' +\n    sdate +\n    '&end_time=' +\n    edate +\n    '&resolution=' +\n    findLibratoResolution(sdate, edate, step);\n  return url_prefix + '?' + params;\n};\n\nexport default make_url;\n","import { json } from 'd3-fetch';\n\nimport downUpSampling from './downUpSampling';\nimport makeUrl from './makeUrl';\n\n/* All the logic to query the librato API is here */\nconst request = (composite, user, token) => ({\n  fire: (isdate, iedate, step, callback_done) => {\n    const a_values = []; /* Store partial values from librato */\n    const full_url = makeUrl(isdate, iedate, step, composite);\n    const auth_string = 'Basic ' + btoa(user + ':' + token);\n\n    /*\n         * Librato has a limit in the number of measurements we get back in a request (100).\n         * We recursively perform requests to the API to ensure we have all the data points\n         * for the interval we are working on.\n         */\n    json(full_url)\n      .header('X-Requested-With', 'XMLHttpRequest')\n      .header('Authorization', auth_string)\n      .header('Librato-User-Agent', 'cubism/' + cubism.version)\n      .then(data => {\n        if (data.measurements.length === 0) {\n          return;\n        }\n        data.measurements[0].series.forEach(function(o) {\n          a_values.push(o);\n        });\n\n        const still_more_values = 'query' in data && 'next_time' in data.query;\n        if (still_more_values) {\n          request(makeUrl(data.query.next_time, iedate, step));\n        } else {\n          const a_adjusted = downUpSampling(isdate, iedate, step, a_values);\n          callback_done(a_adjusted);\n        }\n      })\n      .catch(error => console.error(error));\n  },\n});\n\nexport default request;\n","/* librato (http://dev.librato.com/v1/post/metrics) source\n * If you want to see an example of how to use this source, check: https://gist.github.com/drio/5792680\n */\nimport request from './request';\n\nconst DateFormatter = time => Math.floor(time / 1000);\n\nconst apiLibrato = context => ({\n  librato: (user, token) => ({\n    toString: () => 'librato',\n    metric: m_composite =>\n      context.metric((start, stop, step, callback) => {\n        /* All the librato logic is here; .fire() retrieves the metrics' data */\n        request(m_composite, user, token).fire(\n          DateFormatter(start),\n          DateFormatter(stop),\n          DateFormatter(step),\n          a_values => callback(null, a_values)\n        );\n      }, (m_composite += '')),\n  }),\n});\n\nexport default apiLibrato;\n","import { json, text } from 'd3-fetch';\n\n// Helper method for parsing graphite's raw format.\nconst parseGraphite = text => {\n  const i = text.indexOf('|'),\n    meta = text.substring(0, i),\n    c = meta.lastIndexOf(','),\n    b = meta.lastIndexOf(',', c - 1),\n    a = meta.lastIndexOf(',', b - 1),\n    start = meta.substring(a + 1, b) * 1000,\n    step = meta.substring(c + 1) * 1000;\n  return text\n    .substring(i + 1)\n    .split(',')\n    .slice(1) // the first value is always None?\n    .map(d => +d);\n};\n\nconst DateFormatter = time => Math.floor(time / 1000);\n\nconst apiGraphite = context => ({\n  graphite: (host = '') => {\n    return {\n      toString: () => host, // Returns the graphite host.\n      find: (pattern, callback) => {\n        json(\n          host +\n            '/metrics/find?format=completer' +\n            '&query=' +\n            encodeURIComponent(pattern)\n        ).then(result => {\n          if (!result) return callback(new Error('unable to find metrics'));\n          callback(\n            null,\n            result.metrics.map(function(d) {\n              return d.path;\n            })\n          );\n        });\n      },\n      metric: expression => {\n        let sum = 'sum';\n\n        const metric = context.metric((start, stop, step, callback) => {\n          let target = expression;\n\n          // Apply the summarize, if necessary.\n          if (step !== 1e4)\n            target =\n              'summarize(' +\n              target +\n              \",'\" +\n              (!(step % 36e5)\n                ? step / 36e5 + 'hour'\n                : !(step % 6e4)\n                  ? step / 6e4 + 'min'\n                  : step / 1e3 + 'sec') +\n              \"','\" +\n              sum +\n              \"')\";\n\n          text(\n            host +\n            '/render?format=raw' +\n            '&target=' +\n            encodeURIComponent('alias(' + target + \",'')\") +\n            '&from=' +\n            DateFormatter(start - 2 * step) + // off-by-two?\n              '&until=' +\n              DateFormatter(stop - 1000)\n          ).then(text => {\n            if (!text) return callback(new Error('unable to load data'));\n            callback(null, parseGraphite(text));\n          });\n        }, (expression += ''));\n\n        metric.summarize = _sum => {\n          sum = _sum;\n          return metric;\n        };\n\n        return metric;\n      },\n    };\n  },\n});\n\nexport default apiGraphite;\n","const apiRemove = state => ({\n  remove: selection => {\n    const { context } = state;\n    const _remove = d => {\n      d.primary.on('change.comparison-' + d.id, null);\n      d.secondary.on('change.comparison-' + d.id, null);\n      context.on('change.comparison-' + d.id, null);\n      context.on('focus.comparison-' + d.id, null);\n    };\n\n    selection.on('mousemove.comparison', null).on('mouseout.comparison', null);\n    selection\n      .selectAll('canvas')\n      .each(_remove)\n      .remove();\n\n    selection.selectAll('.title,.value').remove();\n  },\n});\n\nexport default apiRemove;\n","const apiMisc = state => ({\n  height: (_ = null) => {\n    if (_ === null) return state._height;\n    state._height = +_;\n    return state;\n  },\n  primary: (_ = null) => {\n    if (_ === null) return state._primary;\n    state._primary = primary;\n    return state;\n  },\n  secondary: (_ = null) => {\n    if (_ === null) return state._secondary;\n    state._secondary = _;\n    return state;\n  },\n  extent: (_ = null) => {\n    if (_ === null) return state._extent;\n    state._extent = _;\n    return state;\n  },\n  scale: (_ = null) => {\n    if (_ === null) return state._scale;\n    state._scale = _;\n    return state;\n  },\n  title: (_ = null) => {\n    if (_ === null) return state._title;\n    state._title = _;\n    return state;\n  },\n  formatPrimary: (_ = null) => {\n    if (_ === null) return state._formatPrimary;\n    state._formatPrimary = _;\n    return state;\n  },\n  formatChange: (_ = null) => {\n    if (_ === null) return state._formatChange;\n    state._formatChange = _;\n    return state;\n  },\n  colors: (_ = null) => {\n    if (_ === null) return state._colors;\n    state._colorscolors = _;\n    return state;\n  },\n  strokeWidth: (_ = null) => {\n    if (_ === null) return state._strokeWidth;\n    state._strokeWidth = _;\n    return state;\n  },\n});\n\nexport default apiMisc;\n","const s4 = () =>\n  Math.floor((1 + Math.random()) * 0x10000)\n    .toString(16)\n    .substring(1);\n\nconst uuid = () =>\n  s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n\nexport default uuid;\n","import { select } from 'd3-selection';\nimport * as d3 from 'd3';\nimport uuid from '../uuid';\n\nconst roundEven = i => i & 0xfffffe;\nconst roundOdd = i => ((i + 1) & 0xfffffe) - 1;\n\nconst apiRender = state => ({\n  render: selection => {\n    const {\n      context,\n      _width,\n      _height,\n      _scale,\n      _primary,\n      _secondary,\n      _extent,\n      _title,\n      _formatPrimary,\n      _formatChange,\n      _colors,\n      _strokeWidth,\n    } = state;\n\n    selection\n      .on('mousemove.comparison', function() {\n        // todo, why directly d3.mouse doesn't work?\n        context.focus(Math.round(d3.mouse(this)[0]));\n      })\n      .on('mouseout.comparison', () => context.focus(null));\n\n    selection\n      .append('canvas')\n      .attr('width', _width)\n      .attr('height', _height);\n\n    selection\n      .append('span')\n      .attr('class', 'title')\n      .text(_title);\n\n    selection.append('span').attr('class', 'value primary');\n    selection.append('span').attr('class', 'value change');\n\n    selection.each(function(d, i) {\n      const id = uuid(),\n        primary_ =\n          typeof _primary === 'function' ? _primary.call(this, d, i) : _primary,\n        secondary_ =\n          typeof _secondary === 'function'\n            ? _secondary.call(this, d, i)\n            : _secondary,\n        extent_ =\n          typeof _extent === 'function' ? _extent.call(this, d, i) : _extent,\n        div = select(this),\n        canvas = div.select('canvas'),\n        spanPrimary = div.select('.value.primary'),\n        spanChange = div.select('.value.change');\n\n      let ready = null;\n\n      canvas.datum({ id: id, primary: primary_, secondary: secondary_ });\n      const canvasContext = canvas.node().getContext('2d');\n\n      function change(start, stop) {\n        canvasContext.save();\n        canvasContext.clearRect(0, 0, _width, _height);\n\n        // update the scale\n        const primaryExtent = primary_.extent(),\n          secondaryExtent = secondary_.extent(),\n          extent = extent_ == null ? primaryExtent : extent_;\n        _scale.domain(extent).range([_height, 0]);\n        ready = primaryExtent.concat(secondaryExtent).every(isFinite);\n\n        // consistent overplotting\n        const round = (start / context.step()) & 1 ? roundOdd : roundEven;\n\n        // positive changes\n        canvasContext.fillStyle = _colors[2];\n        for (let i = 0, n = _width; i < n; ++i) {\n          const y0 = _scale(primary_.valueAt(i)),\n            y1 = _scale(secondary_.valueAt(i));\n          if (y0 < y1) canvasContext.fillRect(round(i), y0, 1, y1 - y0);\n        }\n\n        // negative changes\n        canvasContext.fillStyle = _colors[0];\n        for (let i = 0, n = _width; i < n; ++i) {\n          const y0 = _scale(primary_.valueAt(i)),\n            y1 = _scale(secondary_.valueAt(i));\n          if (y0 > y1) canvasContext.fillRect(round(i), y1, 1, y0 - y1);\n        }\n\n        // positive values\n        canvasContext.fillStyle = _colors[3];\n        for (let i = 0, n = _width; i < n; ++i) {\n          const y0 = _scale(primary_.valueAt(i)),\n            y1 = _scale(secondary_.valueAt(i));\n          if (y0 <= y1) canvasContext.fillRect(round(i), y0, 1, _strokeWidth);\n        }\n\n        // negative values\n        canvasContext.fillStyle = _colors[1];\n        for (let i = 0, n = _width; i < n; ++i) {\n          const y0 = _scale(primary_.valueAt(i)),\n            y1 = _scale(secondary_.valueAt(i));\n          if (y0 > y1)\n            canvasContext.fillRect(\n              round(i),\n              y0 - _strokeWidth,\n              1,\n              _strokeWidth\n            );\n        }\n\n        canvasContext.restore();\n      }\n\n      const focus = (i = _width - 1) => {\n        const valuePrimary = primary_.valueAt(i),\n          valueSecondary = secondary_.valueAt(i),\n          valueChange = (valuePrimary - valueSecondary) / valueSecondary;\n\n        spanPrimary\n          .datum(valuePrimary)\n          .text(isNaN(valuePrimary) ? null : _formatPrimary);\n\n        spanChange\n          .datum(valueChange)\n          .text(isNaN(valueChange) ? null : _formatChange)\n          .attr(\n            'class',\n            'value change ' +\n              (valueChange > 0 ? 'positive' : valueChange < 0 ? 'negative' : '')\n          );\n      };\n\n      const firstChange = (start, stop) => {\n        change(start, stop);\n        focus();\n        if (ready) {\n          primary_.on('change.comparison-' + id, d => d);\n          secondary_.on('change.comparison-' + id, d => d);\n        }\n      };\n\n      // Display the first primary change immediately,\n      // but defer subsequent updates to the context change.\n      // Note this someone still needs to listen to the metric,\n      // so this it continues to update automatically.\n      primary_.on('change.comparison-' + id, firstChange);\n      secondary_.on('change.comparison-' + id, firstChange);\n\n      // Update the chart when the context changes.\n      context.on('change.comparison-' + id, change);\n      context.on('focus.comparison-' + id, focus);\n    });\n  },\n});\n\nexport default apiRender;\n","import { scaleLinear } from 'd3-scale';\nimport { interpolateRound } from 'd3-interpolate';\nimport { format } from 'd3-format';\n\nimport apiRemove from './apiRemove';\nimport apiMisc from './apiMisc';\nimport apiRender from './apiRender';\n\nconst initState = context => ({\n  context,\n  _width: context.size(),\n  _height: 120,\n  _scale: scaleLinear().interpolate(interpolateRound),\n  _primary: d => d[0],\n  _secondary: d => d[1],\n  _extent: null,\n  _title: d => d,\n  _formatPrimary: format('.2s'),\n  _formatChange: format('+.0%'),\n  _colors: ['#9ecae1', '#225b84', '#a1d99b', '#22723a'],\n  _strokeWidth: 1.5,\n});\n\nconst apiComparison = context => ({\n  comparison: () => {\n    const state = initState(context);\n\n    return Object.assign(\n      state,\n      apiRemove(state),\n      apiMisc(state),\n      apiRender(state)\n    );\n  },\n});\n\nexport default apiComparison;\n","import { dispatch } from 'd3-dispatch';\nimport { scaleTime } from 'd3-scale';\nimport { select, event } from 'd3-selection';\nimport apiStart from './apiStart';\nimport apiStop from './apiStop';\nimport apiOn from './apiOn';\nimport apiFocus from './apiFocus';\nimport apiClientDelay from './apiClientDelay';\nimport apiServerDelay from './apiServerDelay';\nimport apiSize from './apiSize';\nimport apiStep from './apiStep';\nimport update from './update';\n\nimport apiMetric from '../metric';\nimport apiCube from './apiCube';\nimport apiAxis from './apiAxis';\nimport apiRule from './apiRule';\nimport apiHorizon from '../horizon';\n\nimport apiGangliaWeb from './apiGangliaWeb';\nimport apiLibrato from '../librato';\nimport apiGraphite from './apiGraphite';\nimport apiComparison from '../comparison';\n\nconst config = {\n  id: 1,\n  step: 1e4, // ten seconds, in milliseconds\n  size: 1440, // ten seconds, in milliseconds\n  serverDelay: 5e3,\n  clientDelay: 5e3,\n  event: dispatch('prepare', 'beforechange', 'change', 'focus'),\n  start0: null,\n  stop0: null, // the start and stop for the previous change event\n  start1: null,\n  stop1: null, // the start and stop for the next prepare event\n  timeout: null,\n  focus: null,\n  scale: scaleTime().range([0, 1440]),\n};\n\nconst context = () => {\n  const state = {\n    _id: 1,\n    _step: 1e4, // ten seconds, in milliseconds\n    _size: 1440, // ten seconds, in milliseconds\n    _serverDelay: 5e3,\n    _clientDelay: 5e3,\n    _event: dispatch('prepare', 'beforechange', 'change', 'focus'),\n    _start0: null,\n    _stop0: null, // the start and stop for the previous change event\n    _start1: null,\n    _stop1: null, // the start and stop for the next prepare event\n    _timeout: null,\n    _focus: null,\n    _scale: scaleTime().range([0, 1440]),\n  };\n\n  const _context = Object.assign(\n    state,\n    apiAxis(state),\n    apiComparison(state),\n    apiCube(state),\n    apiClientDelay(state),\n    apiFocus(state),\n    apiMetric(state),\n    apiOn(state),\n    apiRule(state),\n    apiServerDelay(state),\n    apiSize(state),\n    apiStart(state),\n    apiStop(state),\n    apiStep(state)\n  );\n\n  state._timeout = setTimeout(_context.start, 10);\n\n  const { focus } = _context;\n\n  select(window).on('keydown.context-' + ++_context._id, function() {\n    switch (!event.metaKey && event.keyCode) {\n      case 37: // left\n        if (focus == null) _context.focus = size - 1;\n        if (focus > 0) _context.focus(--_context.focus);\n        break;\n      case 39: // right\n        if (focus == null) _context.focus = size - 2;\n        if (focus < size - 1) _context.focus(++_context.focus);\n        break;\n      default:\n        return;\n    }\n\n    event.preventDefault();\n  });\n\n  const cubismContext = update(_context);\n\n  return Object.assign(\n    cubismContext,\n    apiHorizon(cubismContext),\n    apiGangliaWeb(cubismContext),\n    apiLibrato(cubismContext),\n    apiGraphite(cubismContext)\n  );\n};\n\nexport default context;\n","const options = (name, defaultValues = null) => {\n  const options = location.search.substring(1).split('&'),\n    values = [],\n    n = options.length;\n\n  let i = -1,\n    o;\n  while (++i < n) {\n    if ((o = options[i].split('='))[0] === name) {\n      values.push(decodeURIComponent(o[1]));\n    }\n  }\n  return values.length || !defaultValues ? values : defaultValues;\n};\n\nconst option = (name, defaultValue) => {\n  const values = options(name);\n  return values.length ? values[0] : defaultValue;\n};\n\nexport { options, option };\n"],"names":["apiStart","start","_timeout","state","_stop1","_serverDelay","_clientDelay","_step","_event","_scale","_size","_focus","clearTimeout","delay","Date","now","prepare","Math","floor","_start1","call","setTimeout","start0","stop0","domain","timeout","apiStop","stop","apiOn","on","type","listener","_start0","_stop0","test","apiFocus","focus","i","update","apiClientDelay","clientDelay","apiServerDelay","serverDelay","apiSize","size","range","apiStep","step","apiAlias","alias","toString","name","apiExtent","extent","_values","value","min","Infinity","max","beforechange","start1","stop1","isFinite","_start","splice","round","_stop","request","_fetching","steps","_steps","error","data","console","warn","j","m","length","_id","context","_listening","MetricOverlap","apiPrepare","values","metricShift","offset","callback","apiShift","shift","metric","apiValueAt","valueAt","genericOperate","operate","Object","assign","apiOperator","add","a","b","subtract","multiply","divide","apiToString","apiMetric","metricState","dispatch","apiCube","cube","host","json","encodeURIComponent","expression","isoFormat","then","Error","map","d","formatSeconds","timeFormat","formatMinutes","formatDays","formatDefault","apiRemove","remove","axisState","selection","selectAll","each","id","apiFocusFormat","focusFormat","_","format","apiRender","render","_axis","scale","tick","g","append","datum","attr","tickSize","select","node","appendChild","cloneNode","style","text","invert","dx","getComputedTextLength","abs","apiTicks","ticks","args","apiOrient","orient","axisSate","axisTop","axisBottom","axisLeft","axisRight","apiAxis","axis","ruleState","_context","_metric","line","metric_","change","n","push","lines","exit","enter","apiRule","rule","_width","_height","_title","_colors","_extent","_buffer","_mode","_format","d3","colors_","extent_","canvas","span","max_","y1","ready","ctx","getContext","save","every","i0","canvas0","clearRect","drawImage","negative","fillStyle","y0","undefined","fillRect","translate","restore","isNaN","apiMisc","mode","height","title","colors","apiHorizon","horizon","buffer","document","createElement","width","scaleLinear","interpolate","interpolateRound","apiGangliaWeb","gangliaWeb","config","uriPathPrefix","clusterName","metricInfo","metricName","hostName","onChangeCallback","isReport","defaultTitleGenerator","titleGenerator","metricKeyName","metricFn","constructGangliaWebRequestQueryParams","result","catch","e","gangliaWebMetric","downUpSampling","isdate","iedate","librato_mm","av","int_mes","measure_time","v","reduce","findIdealLibratoRFesolution","avail_rsts","highest_res","lowest_res","iof","top_res","indexOf","low_res","findLibratoResolution","sdate","edate","i_size","month","week","two_days","ideal_res","make_url","composite","url_prefix","params","user","token","fire","callback_done","a_values","full_url","makeUrl","auth_string","btoa","header","cubism","version","measurements","series","forEach","o","still_more_values","query","next_time","a_adjusted","DateFormatter","time","apiLibrato","librato","m_composite","parseGraphite","meta","substring","c","lastIndexOf","split","slice","apiGraphite","graphite","find","pattern","metrics","path","sum","target","summarize","_sum","_remove","primary","secondary","_primary","_secondary","formatPrimary","_formatPrimary","formatChange","_formatChange","_colorscolors","strokeWidth","_strokeWidth","s4","random","uuid","roundEven","roundOdd","primary_","secondary_","div","spanPrimary","spanChange","canvasContext","primaryExtent","secondaryExtent","concat","valuePrimary","valueSecondary","valueChange","firstChange","initState","apiComparison","comparison","event","scaleTime","window","metaKey","keyCode","preventDefault","cubismContext","options","defaultValues","location","search","decodeURIComponent","option","defaultValue"],"mappings":"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"}